import{r as a}from"./index-DhrokLn_.js";import{b as we,s as Ee}from"./argTypes-DWwBcpdC.js";import{B as C,c as Se}from"./Box-BNrxSn68.js";import{_ as Pe}from"./index-7-gbC2VC.js";import{S as Oe}from"./Section-BEYeSWqu.js";import{a as B,C as Ce}from"./Column-DG7mFRVi.js";import{S as Te}from"./Stack-DEBvJQq8.js";import{B as z}from"./Button-CnANxaYe.js";import{I as Y}from"./Icon-C5RKsWkK.js";import{I as Me}from"./ChevronLeftIcon-Cbc3CAET.js";import{I as _e}from"./ChevronRightIcon-RimmcZLk.js";import{S as je}from"./SliderProgress-DYsUPsEk.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./tokens-JYR_Lhlb.js";import"./makeTheme-BvwTE3C0.js";import"./useNegativeMarginTop-CalKh-AO.js";import"./tiny-invariant.esm-CopsF_GD.js";import"./useTextStyles-B_b2rbpS.js";import"./ProgressSpinner-kyd4VHIW.js";const ke="Left",xe="Right",Ie="Up",Ae="Down",T={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},R={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},W="mousemove",K="mouseup",Ue="touchend",De="touchmove",Ne="touchstart";function qe(e,n,u,s){return e>n?u>0?xe:ke:s>0?Ae:Ie}function F(e,n){if(n===0)return e;const u=Math.PI/180*n,s=e[0]*Math.cos(u)+e[1]*Math.sin(u),p=e[1]*Math.cos(u)-e[0]*Math.sin(u);return[s,p]}function Ve(e,n){const u=t=>{const r="touches"in t;r&&t.touches.length>1||e((o,l)=>{l.trackMouse&&!r&&(document.addEventListener(W,s),document.addEventListener(K,c));const{clientX:f,clientY:v}=r?t.touches[0]:t,h=F([f,v],l.rotationAngle);return l.onTouchStartOrOnMouseDown&&l.onTouchStartOrOnMouseDown({event:t}),Object.assign(Object.assign(Object.assign({},o),R),{initial:h.slice(),xy:h,start:t.timeStamp||0})})},s=t=>{e((r,o)=>{const l="touches"in t;if(l&&t.touches.length>1)return r;if(t.timeStamp-r.start>o.swipeDuration)return r.swiping?Object.assign(Object.assign({},r),{swiping:!1}):r;const{clientX:f,clientY:v}=l?t.touches[0]:t,[h,P]=F([f,v],o.rotationAngle),b=h-r.xy[0],m=P-r.xy[1],w=Math.abs(b),E=Math.abs(m),_=(t.timeStamp||0)-r.start,G=Math.sqrt(w*w+E*E)/(_||1),L=[b/(_||1),m/(_||1)],j=qe(w,E,b,m),y=typeof o.delta=="number"?o.delta:o.delta[j.toLowerCase()]||T.delta;if(w<y&&E<y&&!r.swiping)return r;const O={absX:w,absY:E,deltaX:b,deltaY:m,dir:j,event:t,first:r.first,initial:r.initial,velocity:G,vxvy:L};O.first&&o.onSwipeStart&&o.onSwipeStart(O),o.onSwiping&&o.onSwiping(O);let N=!1;return(o.onSwiping||o.onSwiped||o[`onSwiped${j}`])&&(N=!0),N&&o.preventScrollOnSwipe&&o.trackTouch&&t.cancelable&&t.preventDefault(),Object.assign(Object.assign({},r),{first:!1,eventData:O,swiping:!0})})},p=t=>{e((r,o)=>{let l;if(r.swiping&&r.eventData){if(t.timeStamp-r.start<o.swipeDuration){l=Object.assign(Object.assign({},r.eventData),{event:t}),o.onSwiped&&o.onSwiped(l);const f=o[`onSwiped${l.dir}`];f&&f(l)}}else o.onTap&&o.onTap({event:t});return o.onTouchEndOrOnMouseUp&&o.onTouchEndOrOnMouseUp({event:t}),Object.assign(Object.assign(Object.assign({},r),R),{eventData:l})})},g=()=>{document.removeEventListener(W,s),document.removeEventListener(K,c)},c=t=>{g(),p(t)},i=(t,r)=>{let o=()=>{};if(t&&t.addEventListener){const l=Object.assign(Object.assign({},T.touchEventOptions),r.touchEventOptions),f=[[Ne,u,l],[De,s,Object.assign(Object.assign({},l),r.preventScrollOnSwipe?{passive:!1}:{})],[Ue,p,l]];f.forEach(([v,h,P])=>t.addEventListener(v,h,P)),o=()=>f.forEach(([v,h])=>t.removeEventListener(v,h))}return o},S={ref:t=>{t!==null&&e((r,o)=>{if(r.el===t)return r;const l={};return r.el&&r.el!==t&&r.cleanUpTouch&&(r.cleanUpTouch(),l.cleanUpTouch=void 0),o.trackTouch&&t&&(l.cleanUpTouch=i(t,o)),Object.assign(Object.assign(Object.assign({},r),{el:t}),l)})}};return n.trackMouse&&(S.onMouseDown=u),[S,i]}function Ge(e,n,u,s){return!n.trackTouch||!e.el?(e.cleanUpTouch&&e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:void 0})):e.cleanUpTouch?n.preventScrollOnSwipe!==u.preventScrollOnSwipe||n.touchEventOptions.passive!==u.touchEventOptions.passive?(e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:s(e.el,n)})):e:Object.assign(Object.assign({},e),{cleanUpTouch:s(e.el,n)})}function Le(e){const{trackMouse:n}=e,u=a.useRef(Object.assign({},R)),s=a.useRef(Object.assign({},T)),p=a.useRef(Object.assign({},s.current));p.current=Object.assign({},s.current),s.current=Object.assign(Object.assign({},T),e);let g;for(g in T)s.current[g]===void 0&&(s.current[g]=T[g]);const[c,i]=a.useMemo(()=>Ve(d=>u.current=d(u.current,s.current),{trackMouse:n}),[n]);return u.current=Ge(u.current,s.current,p.current,i),c}var J="_2i92q00",Q="_2i92q01",Be="_2i92q02",Re="_2i92q03",Xe="_2i92q04",$e="_2i92q05";const X=new Map,q=new WeakMap;let Z=0,He;function ze(e){return e?(q.has(e)||(Z+=1,q.set(e,Z.toString())),q.get(e)):"0"}function Ye(e){return Object.keys(e).sort().filter(n=>e[n]!==void 0).map(n=>`${n}_${n==="root"?ze(e.root):e[n]}`).toString()}function We(e){let n=Ye(e),u=X.get(n);if(!u){const s=new Map;let p;const g=new IntersectionObserver(c=>{c.forEach(i=>{var d;const S=i.isIntersecting&&p.some(t=>i.intersectionRatio>=t);e.trackVisibility&&typeof i.isVisible>"u"&&(i.isVisible=S),(d=s.get(i.target))==null||d.forEach(t=>{t(S,i)})})},e);p=g.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),u={id:n,observer:g,elements:s},X.set(n,u)}return u}function Ke(e,n,u={},s=He){if(typeof window.IntersectionObserver>"u"&&s!==void 0){const d=e.getBoundingClientRect();return n(s,{isIntersecting:s,target:e,intersectionRatio:typeof u.threshold=="number"?u.threshold:0,time:0,boundingClientRect:d,intersectionRect:d,rootBounds:d}),()=>{}}const{id:p,observer:g,elements:c}=We(u);let i=c.get(e)||[];return c.has(e)||c.set(e,i),i.push(n),g.observe(e),function(){i.splice(i.indexOf(n),1),i.length===0&&(c.delete(e),g.unobserve(e)),c.size===0&&(g.disconnect(),X.delete(p))}}function Fe({threshold:e,delay:n,trackVisibility:u,rootMargin:s,root:p,triggerOnce:g,skip:c,initialInView:i,fallbackInView:d,onChange:S}={}){var t;const[r,o]=a.useState(null),l=a.useRef(),[f,v]=a.useState({inView:!!i,entry:void 0});l.current=S,a.useEffect(()=>{if(c||!r)return;let m;return m=Ke(r,(w,E)=>{v({inView:w,entry:E}),l.current&&l.current(w,E),E.isIntersecting&&g&&m&&(m(),m=void 0)},{root:p,rootMargin:s,threshold:e,trackVisibility:u,delay:n},d),()=>{m&&m()}},[Array.isArray(e)?e.toString():e,r,p,s,g,c,u,d,n]);const h=(t=f.entry)==null?void 0:t.target,P=a.useRef();!r&&h&&!g&&!c&&P.current!==h&&(P.current=h,v({inView:!!i,entry:void 0}));const b=[o,f.inView,f.entry];return b.ref=b[0],b.inView=b[1],b.entry=b[2],b}const ee=e=>typeof e.activePage=="number"&&e.activePage+1<e.pageCount?e.activePage+1:0,Je=e=>typeof e.activePage=="number"&&e.activePage-1>=0?e.activePage-1:e.pageCount-1,Qe=(e,n)=>{switch(n.type){case"GO_TO_PAGE":return{...e,activePage:n.payload};case"SET_PAGE_COUNT":return{...e,pageCount:n.payload};case"NEXT_PAGE":return{...e,paused:!1,activePage:ee(e)};case"CLICK_NEXT":return{...e,paused:!1,activePage:ee(e)};case"PREV_PAGE":return{...e,paused:!1,activePage:Je(e)};case"PAUSE":return{...e,paused:!0};case"RESUME":return{...e,paused:!1};default:return e}},Ze=({itemsRef:e,itemsPerPage:n=1,paused:u=!1,activePage:s=null,onChange:p=()=>{}})=>{const[{pageCount:g,activePage:c,paused:i},d]=a.useReducer(Qe,{paused:u,activePage:void 0,pageCount:e!=null&&e.length?Math.ceil(e.length/n):1});a.useEffect(()=>{d({type:"SET_PAGE_COUNT",payload:e!=null&&e.length?Math.ceil(e.length/n):1})},[e==null?void 0:e.length,n]);const S=a.useCallback(m=>{m&&typeof c!="number"&&d({type:"GO_TO_PAGE",payload:typeof s=="number"?s:0})},[s,c]),[t,r,o]=Fe({triggerOnce:!1,rootMargin:"0px",onChange:S}),l=a.useCallback(()=>{d({type:"NEXT_PAGE"})},[]),f=a.useCallback(()=>{d({type:"PREV_PAGE"})},[]),v=a.useCallback(m=>{d({type:"GO_TO_PAGE",payload:m})},[]),h=a.useCallback(()=>{d({type:"CLICK_NEXT"})},[]),P=a.useCallback(()=>{d({type:"PAUSE"})},[]),b=a.useCallback(()=>{d({type:"RESUME"})},[]);return a.useEffect(()=>{typeof c!="number"||!(e!=null&&e.length)||(p(c),a.startTransition(()=>{o==null||o.target.scrollTo({top:0,left:e[c].getBoundingClientRect().left-e[0].getBoundingClientRect().left,behavior:"smooth"})}))},[e,c,o==null?void 0:o.target,p]),a.useMemo(()=>({containerRef:t,paused:i||!r,pageCount:g,activePage:c,next:l,prev:f,goToPage:v,onClick:h,pause:P,resume:b}),[t,g,c,i,r])},V=({sliderProgressColour:e="primary",noControls:n=!1,space:u="5",durationSeconds:s=10,children:p,itemsPerPage:g,paused:c,activePage:i,columnWidth:d="1/2",className:S})=>{const t=a.useMemo(()=>Pe(p),[p]),[r,o]=a.useState(i),[l,f]=a.useState(),v=a.useMemo(()=>{const y=[],O=t.map((N,$)=>a.createElement(B,{ref:H=>{H&&y.push(H)},key:$,noShrink:!0,width:d,justifyContent:"stretch",alignSelf:"stretch"},a.createElement(C,{width:"full",className:Se(Xe,{[$e]:$===r})},N)));return f(y),O},[t,r,d]),{containerRef:h,pageCount:P,activePage:b,paused:m,next:w,prev:E,onClick:_,pause:G,resume:L}=Ze({itemsRef:l,itemsPerPage:g,paused:c,activePage:i,onChange:o}),j=Le({onSwiped:y=>{y.dir==="Left"?w():E()}});return v.length<2?a.createElement(a.Fragment,null,v):a.createElement(Te,{className:S,space:"5"},a.createElement(C,{overflow:"hidden",position:"relative",...j,onContextMenu:y=>{y.preventDefault(),y.stopPropagation()},onTouchStart:G,onTouchEnd:L,onClick:_},n?null:a.createElement(C,{className:[J,Be],display:"flex",alignItems:"center",justifyContent:"flexStart",position:"absolute"},a.createElement(z,{rounded:!0,onClick:y=>{y.stopPropagation(),y.preventDefault(),E()},variant:"secondary"},a.createElement(Y,{icon:Me}))),a.createElement(Ce,{ref:h,overflow:"hidden",noWrap:!0,width:"full",space:u},n?null:a.createElement(B,{noShrink:!0,className:Q},a.createElement("span",null)),v,n?null:a.createElement(B,{noShrink:!0,className:Q},a.createElement("span",null))),n?null:a.createElement(C,{className:[J,Re],display:"flex",alignItems:"center",justifyContent:"flexEnd",position:"absolute"},a.createElement(z,{rounded:!0,onClick:y=>{y.stopPropagation(),y.preventDefault(),w()},variant:"secondary"},a.createElement(Y,{icon:_e})))),a.createElement(Oe,{width:"small"},a.createElement(je,{backgroundColour:e,duration:`${s}s`,paused:m,onRequestNext:w,totalCount:P,activeIndex:b||0})))};try{V.displayName="HorizontalAutoScroller",V.__docgenInfo={description:"",displayName:"HorizontalAutoScroller",props:{durationSeconds:{defaultValue:{value:"10"},description:"",name:"durationSeconds",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},columnWidth:{defaultValue:{value:"1/2"},description:"",name:"columnWidth",required:!1,type:{name:"ResponsiveProp<string | number>"}},sliderProgressColour:{defaultValue:{value:"primary"},description:"",name:"sliderProgressColour",required:!1,type:{name:"enum",value:[{value:'"transparent"'},{value:'"white"'},{value:'"primary"'},{value:'"brand"'},{value:'"secondary"'},{value:'"shine"'},{value:'"neutral"'},{value:'"danger"'},{value:'"warning"'},{value:'"success"'},{value:'"information"'},{value:'"black900"'},{value:'"black800"'},{value:'"black700"'},{value:'"black600"'},{value:'"black500"'},{value:'"black400"'},{value:'"black300"'},{value:'"black200"'},{value:'"black100"'},{value:'"gray900"'},{value:'"gray800"'},{value:'"gray700"'},{value:'"gray600"'},{value:'"gray500"'},{value:'"gray400"'},{value:'"gray300"'},{value:'"gray200"'},{value:'"gray100"'},{value:'"blue900"'},{value:'"blue800"'},{value:'"blue700"'},{value:'"blue600"'},{value:'"blue500"'},{value:'"blue400"'},{value:'"blue300"'},{value:'"blue200"'},{value:'"blue100"'},{value:'"green900"'},{value:'"green800"'},{value:'"green700"'},{value:'"green600"'},{value:'"green500"'},{value:'"green400"'},{value:'"green300"'},{value:'"green200"'},{value:'"green100"'},{value:'"red900"'},{value:'"red800"'},{value:'"red700"'},{value:'"red600"'},{value:'"red500"'},{value:'"red400"'},{value:'"red300"'},{value:'"red200"'},{value:'"red100"'},{value:'"yellow900"'},{value:'"yellow800"'},{value:'"yellow700"'},{value:'"yellow600"'},{value:'"yellow500"'},{value:'"yellow400"'},{value:'"yellow300"'},{value:'"yellow200"'},{value:'"yellow100"'}]}},noControls:{defaultValue:{value:"false"},description:"",name:"noControls",required:!1,type:{name:"boolean"}},space:{defaultValue:{value:"5"},description:"",name:"space",required:!1,type:{name:"ResponsiveProp<SpaceScale>"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((page: number) => void)"}},paused:{defaultValue:null,description:"",name:"paused",required:!1,type:{name:"boolean"}},activePage:{defaultValue:null,description:"",name:"activePage",required:!1,type:{name:"number | null"}},itemsPerPage:{defaultValue:null,description:"",name:"itemsPerPage",required:!1,type:{name:"number"}}}}}catch{}const yt={title:"Components/HorizontalAutoScroller",component:V,argTypes:{sliderProgressColour:we.backgroundColour,space:{options:Ee,control:{type:"select"}},paused:{control:{type:"boolean"}},noControls:{control:{type:"boolean"}}}},D=({childrenNum:e,...n})=>a.createElement(V,{...n},Array.from({length:e}).map((u,s)=>a.createElement(C,{key:s,backgroundColour:"gray200",padding:"3",display:"flex",width:"full",height:"full",alignItems:"center",justifyContent:"center"},a.createElement(C,{style:{width:"100%",height:20+Math.ceil(Math.random()*300)},backgroundColour:"gray900"})))),M={paused:!1,activePage:0,childrenNum:9},k=D.bind(M);k.args=M;const ve={...M,activePage:3},x=D.bind(ve);x.args=ve;const he={...M,durationSeconds:1},I=D.bind(he);I.args=he;const be={...M,sliderProgressColour:"yellow500"},A=D.bind(be);A.args=be;const ye={...M,childrenNum:50},U=D.bind(ye);U.args=ye;var te,ne,ae;k.parameters={...k.parameters,docs:{...(te=k.parameters)==null?void 0:te.docs,source:{originalSource:"template.bind(standardProps)",...(ae=(ne=k.parameters)==null?void 0:ne.docs)==null?void 0:ae.source}}};var re,oe,se;x.parameters={...x.parameters,docs:{...(re=x.parameters)==null?void 0:re.docs,source:{originalSource:"template.bind(widthStartPageProps)",...(se=(oe=x.parameters)==null?void 0:oe.docs)==null?void 0:se.source}}};var ue,le,ce;I.parameters={...I.parameters,docs:{...(ue=I.parameters)==null?void 0:ue.docs,source:{originalSource:"template.bind(withCustomDurationProps)",...(ce=(le=I.parameters)==null?void 0:le.docs)==null?void 0:ce.source}}};var ie,de,ge;A.parameters={...A.parameters,docs:{...(ie=A.parameters)==null?void 0:ie.docs,source:{originalSource:"template.bind(withProgressColourProps)",...(ge=(de=A.parameters)==null?void 0:de.docs)==null?void 0:ge.source}}};var pe,fe,me;U.parameters={...U.parameters,docs:{...(pe=U.parameters)==null?void 0:pe.docs,source:{originalSource:"template.bind(withManySlidesProps)",...(me=(fe=U.parameters)==null?void 0:fe.docs)==null?void 0:me.source}}};const wt=["standard","widthStartPage","withCustomDuration","withProgressColour","withManySlides"];export{wt as __namedExportsOrder,yt as default,k as standard,x as widthStartPage,I as withCustomDuration,U as withManySlides,A as withProgressColour};
