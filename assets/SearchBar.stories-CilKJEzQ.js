import{f as Ee,w as je,e as C,u as F}from"./index-B5B_0MNA.js";import{r as N,R as u}from"./index-Cr_cdoBq.js";import{c as D,o as Se}from"./createRuntimeFn-62c9670f.esm-8KfOB316.js";import{m as Be}from"./index-R9txMNUR.js";import{d as Ie}from"./dataAttrs-BPvLuXwN.js";import{b as De,c as E,d as z,a as M,o as Fe,p as ke,m as Re}from"./useFocusRing-DDOaAyjf.js";import{$ as Ve}from"./context-BlJjP2hj.js";import{$ as q,a as Le}from"./useFocusable-Cm-Bsvvf.js";import{$ as Oe,c as _e,a as Ae}from"./useField-DwUINniu.js";import{I as k}from"./Icon-u2F7oOeh.js";import{I as Te}from"./MagnifyIcon-C8SSV07c.js";import{I as Ne}from"./CloseIcon-CBJUgSLW.js";import"./_commonjsHelpers-C932wzq6.js";import"./Box-riOnoi3Y.js";import"./useLabel-onsDLuTH.js";const ze=Symbol.for("react-aria.i18n.locale"),Me=Symbol.for("react-aria.i18n.strings");let w;class j{getStringForLocale(a,t){let n=this.getStringsForLocale(t)[a];if(!n)throw new Error(`Could not find intl message ${a} in ${t} locale`);return n}getStringsForLocale(a){let t=this.strings[a];return t||(t=qe(a,this.strings,this.defaultLocale),this.strings[a]=t),t}static getGlobalDictionaryForPackage(a){if(typeof window>"u")return null;let t=window[ze];if(w===void 0){let n=window[Me];if(!n)return null;w={};for(let s in n)w[s]=new j({[t]:n[s]},t)}let r=w==null?void 0:w[a];if(!r)throw new Error(`Strings for package "${a}" were not included by LocalizedStringProvider. Please add it to the list passed to createLocalizedStringDictionary.`);return r}constructor(a,t="en-US"){this.strings=Object.fromEntries(Object.entries(a).filter(([,r])=>r)),this.defaultLocale=t}}function qe(e,a,t="en-US"){if(a[e])return a[e];let r=He(e);if(a[r])return a[r];for(let n in a)if(n.startsWith(r+"-"))return a[n];return a[t]}function He(e){return Intl.Locale?new Intl.Locale(e).language:e.split("-")[0]}const R=new Map,V=new Map;class Ue{format(a,t){let r=this.strings.getStringForLocale(a,this.locale);return typeof r=="function"?r(t,this):r}plural(a,t,r="cardinal"){let n=t["="+a];if(n)return typeof n=="function"?n():n;let s=this.locale+":"+r,l=R.get(s);l||(l=new Intl.PluralRules(this.locale,{type:r}),R.set(s,l));let o=l.select(a);return n=t[o]||t.other,typeof n=="function"?n():n}number(a){let t=V.get(this.locale);return t||(t=new Intl.NumberFormat(this.locale),V.set(this.locale,t)),t.format(a)}select(a,t){let r=a[t]||a.other;return typeof r=="function"?r():r}constructor(a,t){this.locale=a,this.strings=t}}const L=new WeakMap;function We(e){let a=L.get(e);return a||(a=new j(e),L.set(e,a)),a}function Ke(e,a){return a&&j.getGlobalDictionaryForPackage(a)||We(e)}function Ge(e,a){let{locale:t}=Ve(),r=Ke(e,a);return N.useMemo(()=>new Ue(t,r),[t,r])}function Ze(e,a){let{elementType:t="button",isDisabled:r,onPress:n,onPressStart:s,onPressEnd:l,onPressUp:o,onPressChange:d,preventFocusOnPress:b,allowFocusWhenDisabled:m,onClick:f,href:p,target:h,rel:x,type:$="button"}=e,c;t==="button"?c={type:$,disabled:r}:c={role:"button",tabIndex:r?void 0:0,href:t==="a"&&!r?p:void 0,target:t==="a"?h:void 0,type:t==="input"?$:void 0,disabled:t==="input"?r:void 0,"aria-disabled":!r||t==="input"?void 0:r,rel:t==="a"?x:void 0};let{pressProps:i,isPressed:v}=De({onPressStart:s,onPressEnd:l,onPressChange:d,onPress:n,onPressUp:o,isDisabled:r,preventFocusOnPress:b,ref:a}),{focusableProps:y}=q(e,a);m&&(y.tabIndex=r?-1:y.tabIndex);let S=E(y,i,z(e,{labelable:!0}));return{isPressed:v,buttonProps:E(c,S,{"aria-haspopup":e["aria-haspopup"],"aria-expanded":e["aria-expanded"],"aria-controls":e["aria-controls"],"aria-pressed":e["aria-pressed"],onClick:g=>{f&&(f(g),console.warn("onClick is deprecated, please use onPress"))}})}}function Je(e,a){let{inputElementType:t="input",isDisabled:r=!1,isRequired:n=!1,isReadOnly:s=!1,type:l="text",validationBehavior:o="aria"}=e,[d,b]=M(e.value,e.defaultValue||"",e.onChange),{focusableProps:m}=q(e,a),f=Oe({...e,value:d}),{isInvalid:p,validationErrors:h,validationDetails:x}=f.displayValidation,{labelProps:$,fieldProps:c,descriptionProps:i,errorMessageProps:v}=_e({...e,isInvalid:p,errorMessage:e.errorMessage||h}),y=z(e,{labelable:!0});const S={type:l,pattern:e.pattern};return Le(a,d,b),Ae(e,f,a),N.useEffect(()=>{if(a.current instanceof Fe(a.current).HTMLTextAreaElement){let g=a.current;Object.defineProperty(g,"defaultValue",{get:()=>g.value,set:()=>{},configurable:!0})}},[a]),{labelProps:$,inputProps:E(y,t==="input"?S:void 0,{disabled:r,readOnly:s,required:n&&o==="native","aria-required":n&&o==="aria"||void 0,"aria-invalid":p||void 0,"aria-errormessage":e["aria-errormessage"],"aria-activedescendant":e["aria-activedescendant"],"aria-autocomplete":e["aria-autocomplete"],"aria-haspopup":e["aria-haspopup"],"aria-controls":e["aria-controls"],value:d,onChange:g=>b(g.target.value),autoComplete:e.autoComplete,autoCapitalize:e.autoCapitalize,maxLength:e.maxLength,minLength:e.minLength,name:e.name,placeholder:e.placeholder,inputMode:e.inputMode,autoCorrect:e.autoCorrect,spellCheck:e.spellCheck,onCopy:e.onCopy,onCut:e.onCut,onPaste:e.onPaste,onCompositionEnd:e.onCompositionEnd,onCompositionStart:e.onCompositionStart,onCompositionUpdate:e.onCompositionUpdate,onSelect:e.onSelect,onBeforeInput:e.onBeforeInput,onInput:e.onInput,...m,...c}),descriptionProps:i,errorMessageProps:v,isInvalid:p,validationErrors:h,validationDetails:x}}var H={};H={"Clear search":"مسح البحث"};var U={};U={"Clear search":"Изчистване на търсене"};var W={};W={"Clear search":"Vymazat hledání"};var K={};K={"Clear search":"Ryd søgning"};var G={};G={"Clear search":"Suche zurücksetzen"};var Z={};Z={"Clear search":"Απαλοιφή αναζήτησης"};var J={};J={"Clear search":"Clear search"};var Q={};Q={"Clear search":"Borrar búsqueda"};var X={};X={"Clear search":"Tühjenda otsing"};var Y={};Y={"Clear search":"Tyhjennä haku"};var ee={};ee={"Clear search":"Effacer la recherche"};var ae={};ae={"Clear search":"נקה חיפוש"};var te={};te={"Clear search":"Obriši pretragu"};var re={};re={"Clear search":"Keresés törlése"};var ne={};ne={"Clear search":"Cancella ricerca"};var se={};se={"Clear search":"検索をクリア"};var oe={};oe={"Clear search":"검색 지우기"};var le={};le={"Clear search":"Išvalyti iešką"};var ie={};ie={"Clear search":"Notīrīt meklēšanu"};var ue={};ue={"Clear search":"Tøm søk"};var ce={};ce={"Clear search":"Zoekactie wissen"};var de={};de={"Clear search":"Wyczyść zawartość wyszukiwania"};var fe={};fe={"Clear search":"Limpar pesquisa"};var pe={};pe={"Clear search":"Limpar pesquisa"};var be={};be={"Clear search":"Ştergeţi căutarea"};var he={};he={"Clear search":"Очистить поиск"};var $e={};$e={"Clear search":"Vymazať vyhľadávanie"};var me={};me={"Clear search":"Počisti iskanje"};var xe={};xe={"Clear search":"Obriši pretragu"};var ve={};ve={"Clear search":"Rensa sökning"};var ge={};ge={"Clear search":"Aramayı temizle"};var Ce={};Ce={"Clear search":"Очистити пошук"};var we={};we={"Clear search":"清除搜索"};var ye={};ye={"Clear search":"清除搜尋條件"};var Pe={};Pe={"ar-AE":H,"bg-BG":U,"cs-CZ":W,"da-DK":K,"de-DE":G,"el-GR":Z,"en-US":J,"es-ES":Q,"et-EE":X,"fi-FI":Y,"fr-FR":ee,"he-IL":ae,"hr-HR":te,"hu-HU":re,"it-IT":ne,"ja-JP":se,"ko-KR":oe,"lt-LT":le,"lv-LV":ie,"nb-NO":ue,"nl-NL":ce,"pl-PL":de,"pt-BR":fe,"pt-PT":pe,"ro-RO":be,"ru-RU":he,"sk-SK":$e,"sl-SI":me,"sr-SP":xe,"sv-SE":ve,"tr-TR":ge,"uk-UA":Ce,"zh-CN":we,"zh-TW":ye};function Qe(e){return e&&e.__esModule?e.default:e}function Xe(e,a,t){let r=Ge(Qe(Pe),"@react-aria/searchfield"),{isDisabled:n,isReadOnly:s,onSubmit:l,onClear:o,type:d="search"}=e,b=i=>{const v=i.key;v==="Enter"&&(n||s)&&i.preventDefault(),!(n||s)&&(v==="Enter"&&l&&(i.preventDefault(),l(a.value)),v==="Escape"&&(a.value===""&&(!t.current||t.current.value==="")?i.continuePropagation():(i.preventDefault(),a.setValue(""),o&&o())))},m=()=>{a.setValue(""),o&&o()},f=()=>{var i;(i=t.current)===null||i===void 0||i.focus()},{labelProps:p,inputProps:h,descriptionProps:x,errorMessageProps:$,...c}=Je({...e,value:a.value,onChange:a.setValue,onKeyDown:s?e.onKeyDown:ke(b,e.onKeyDown),type:d},t);return{labelProps:p,inputProps:{...h,defaultValue:void 0},clearButtonProps:{"aria-label":r.format("Clear search"),excludeFromTabOrder:!0,preventFocusOnPress:!0,isDisabled:n||s,onPress:m,onPressStart:f},descriptionProps:x,errorMessageProps:$,...c}}function Ye(e){let[a,t]=M(O(e.value),O(e.defaultValue)||"",e.onChange);return{value:a,setValue:t}}function O(e){if(e!=null)return e.toString()}var ea=D({defaultClassName:"_1p4n4814 _1p4n4812 onxwju1r onxwju21 onxwjul0 onxwju1dk onxwju13y onxwju1do onxwju3w onxwju3u onxwju48 onxwju4s onxwjucc onxwjugs onxwjurs onxwjut0 onxwju23a onxwjuj0 onxwju23s onxwju248 onxwju245 onxwju24o onxwju254 onxwju25h onxwju1",variantClassNames:{disabled:{true:"_1p4n4815 _1p4n4813 onxwjus0 onxwju22w"}},defaultVariants:{},compoundVariants:[]}),aa=D({defaultClassName:"_1p4n4817 _1p4n4816 onxwju1ds onxwjuh8 onxwjunc onxwju2y onxwju248 onxwju3m onxwjuow _1p4n4810 _1p4n4811",variantClassNames:{},defaultVariants:{},compoundVariants:[]}),ta=D({defaultClassName:"_1p4n4819 _1p4n4818 onxwju2h onxwju1n onxwju1x onxwju27 onxwjuog onxwjun8 onxwjul0 onxwju1ds onxwjuc4 onxwju22o onxwjuj0 onxwjulg onxwjum8",variantClassNames:{},defaultVariants:{},compoundVariants:[]});const ra={label:"Search",clear:"clear search"},na=e=>{const a=u.useRef(null),{buttonProps:t}=Ze(e,a);return u.createElement("button",{...t,className:e.className,ref:a},e.children)},I=e=>{const{label:a,placeholder:t,ref:r}=e,n=a??(t==null?void 0:t.length)?t:ra.label,s={...e,"aria-label":n,placeholder:n},l=Ye(s),o=u.useRef(null),d=u.useRef(null),{clearButtonProps:b,inputProps:m}=Xe(s,l,o),{focusProps:f,isFocused:p,isFocusVisible:h}=Re(s),x=()=>{var c;(c=o.current)==null||c.focus()},$=()=>l.value===""?null:u.createElement(na,{className:ta({}),...b},u.createElement(k,{icon:Ne,size:"100%"}));return u.createElement("div",{className:ea({}),onClick:x,ref:d,...Ie({focus:p,"focus-visible":h,"test-id":s.testId})},u.createElement("div",null,u.createElement(k,{icon:Te,size:"large"})),u.createElement("div",{className:Se({display:"flex",flexGrow:1,alignItems:"center"})},u.createElement("input",{...E(m,f),className:aa({}),ref:Be([o,r])}),u.createElement($,null)))};try{I.displayName="SearchBar",I.__docgenInfo={description:"Oversized search bar implemented via the react-aria `useSearchField` hook\n([docs](https://react-spectrum.adobe.com/react-aria/useSearchField.html)). This search bar is used primarily in\ncombination with the `OptionGrid` in order to filter displayed options and can be reset once text is entered.\n\nThis field does not have a visible label, so an placeholder text is used as `aria-label`.\nIt is recommended to use the `onChange` prop to handle the input content, uncontrolled.",displayName:"SearchBar",props:{placeholder:{defaultValue:null,description:"The placeholder text is also used as the aria-label since the SearchBar does not have a label element",name:"placeholder",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"The event handler for when the search field's value changes",name:"onChange",required:!1,type:{name:"((value: string) => void)"}},lang:{defaultValue:null,description:"Language content override",name:"lang",required:!1,type:{name:'Partial<Record<"label" | "clear", string>>'}},ref:{defaultValue:null,description:"Optional forwarded ref for the input element (React 19)",name:"ref",required:!1,type:{name:"Ref<HTMLInputElement>"}},testId:{defaultValue:null,description:"The test ID will be rendered as a data attribute on the element for e2e testing purposes",name:"testId",required:!1,type:{name:"string"}}}}}catch{}const ga={title:"Forms & Input Fields/Search Input",component:I,args:{placeholder:"Search for tasks",onChange:Ee(),lang:{label:"Search for tasks",clear:"clear search"},maxLength:25,testId:"demo-search-bar"},tags:["beta"]},B="Test search phrase",P={play:async({args:e,canvasElement:a,step:t})=>{const r=je(a),n=r.getAllByRole("searchbox")[0];await t("Initial state",async()=>{await C(n).toHaveAccessibleName(e.placeholder??e.label)}),n.focus(),await t("Enter text into the search field",async()=>{await F.type(n,B),await C(e.onChange).toBeCalledWith(B),await C(n).toHaveValue(B),await C(n).toHaveFocus()}),await t("Clearing the search field",async()=>{await C(r.getAllByRole("button")[0]).toBeVisible(),await F.keyboard("{Esc}"),await C(n).toHaveValue("")}),n.blur()}};var _,A,T;P.parameters={...P.parameters,docs:{...(_=P.parameters)==null?void 0:_.docs,source:{originalSource:`{
  play: async ({
    args,
    canvasElement,
    step
  }) => {
    const canvas = within(canvasElement);
    const field = canvas.getAllByRole('searchbox')[0];
    await step('Initial state', async () => {
      await expect(field).toHaveAccessibleName(args.placeholder ?? args.label);
    });
    field.focus(); // react-aria seems to need this event to register interactions
    await step('Enter text into the search field', async () => {
      await userEvent.type(field, testPhrase);
      await expect(args.onChange).toBeCalledWith(testPhrase);
      await expect(field).toHaveValue(testPhrase);
      await expect(field).toHaveFocus();
    });
    await step('Clearing the search field', async () => {
      await expect(canvas.getAllByRole('button')[0]).toBeVisible();
      await userEvent.keyboard('{Esc}');
      await expect(field).toHaveValue('');
    });
    field.blur();
  }
}`,...(T=(A=P.parameters)==null?void 0:A.docs)==null?void 0:T.source}}};const Ca=["SearchInput"];export{P as SearchInput,Ca as __namedExportsOrder,ga as default};
