import{r as $e,e as n,q as B,v as ve,E as Ce}from"./iframe-CFwUcJnX.js";import{f as R,c as xe,e as ge,m as ye,d as _,n as Ee,k as Pe}from"./useFocusRing-BJvcf-le.js";import{$ as Be,a as we}from"./useButton-0PzvJ91O.js";import{$ as De}from"./useFormReset-8uaf6KFn.js";import{$ as Se,c as Ve,a as Ie}from"./useField-Dv7Llc0p.js";import{I as w}from"./Icon-DeLX8lrb.js";import{I as ke}from"./MagnifyIcon-DEEJaxKU.js";import{I as Re}from"./CloseIcon-C0fCU5Jm.js";import"./index-CxiwmT52.js";import"./index-B85a9uKh.js";import"./context-DwQ0asvy.js";import"./useLabel-Cd9Ss8NS.js";import"./resolveResponsiveProps-BLCo0nz9.js";function _e(e,a){let{inputElementType:t="input",isDisabled:i=!1,isRequired:r=!1,isReadOnly:s=!1,type:u="text",validationBehavior:l="aria"}=e,[c,f]=R(e.value,e.defaultValue||"",e.onChange),{focusableProps:$}=xe(e,a),p=Se({...e,value:c}),{isInvalid:d,validationErrors:h,validationDetails:v}=p.displayValidation,{labelProps:C,fieldProps:b,descriptionProps:o,errorMessageProps:x}=Ve({...e,isInvalid:d,errorMessage:e.errorMessage||h}),be=ge(e,{labelable:!0});const me={type:u,pattern:e.pattern};return De(a,c,f),Ie(e,p,a),$e.useEffect(()=>{if(a.current instanceof ye(a.current).HTMLTextAreaElement){let g=a.current;Object.defineProperty(g,"defaultValue",{get:()=>g.value,set:()=>{},configurable:!0})}},[a]),{labelProps:C,inputProps:_(be,t==="input"?me:void 0,{disabled:i,readOnly:s,required:r&&l==="native","aria-required":r&&l==="aria"||void 0,"aria-invalid":d||void 0,"aria-errormessage":e["aria-errormessage"],"aria-activedescendant":e["aria-activedescendant"],"aria-autocomplete":e["aria-autocomplete"],"aria-haspopup":e["aria-haspopup"],"aria-controls":e["aria-controls"],value:c,onChange:g=>f(g.target.value),autoComplete:e.autoComplete,autoCapitalize:e.autoCapitalize,maxLength:e.maxLength,minLength:e.minLength,name:e.name,placeholder:e.placeholder,inputMode:e.inputMode,autoCorrect:e.autoCorrect,spellCheck:e.spellCheck,[parseInt(n.version,10)>=17?"enterKeyHint":"enterkeyhint"]:e.enterKeyHint,onCopy:e.onCopy,onCut:e.onCut,onPaste:e.onPaste,onCompositionEnd:e.onCompositionEnd,onCompositionStart:e.onCompositionStart,onCompositionUpdate:e.onCompositionUpdate,onSelect:e.onSelect,onBeforeInput:e.onBeforeInput,onInput:e.onInput,...$,...b}),descriptionProps:o,errorMessageProps:x,isInvalid:d,validationErrors:h,validationDetails:v}}var T={};T={"Clear search":"مسح البحث"};var A={};A={"Clear search":"Изчистване на търсене"};var N={};N={"Clear search":"Vymazat hledání"};var O={};O={"Clear search":"Ryd søgning"};var F={};F={"Clear search":"Suche zurücksetzen"};var L={};L={"Clear search":"Απαλοιφή αναζήτησης"};var q={};q={"Clear search":"Clear search"};var z={};z={"Clear search":"Borrar búsqueda"};var H={};H={"Clear search":"Tühjenda otsing"};var M={};M={"Clear search":"Tyhjennä haku"};var K={};K={"Clear search":"Effacer la recherche"};var W={};W={"Clear search":"נקה חיפוש"};var U={};U={"Clear search":"Obriši pretragu"};var j={};j={"Clear search":"Keresés törlése"};var G={};G={"Clear search":"Cancella ricerca"};var Z={};Z={"Clear search":"検索をクリア"};var J={};J={"Clear search":"검색 지우기"};var Y={};Y={"Clear search":"Išvalyti iešką"};var Q={};Q={"Clear search":"Notīrīt meklēšanu"};var X={};X={"Clear search":"Tøm søk"};var ee={};ee={"Clear search":"Zoekactie wissen"};var ae={};ae={"Clear search":"Wyczyść zawartość wyszukiwania"};var te={};te={"Clear search":"Limpar pesquisa"};var re={};re={"Clear search":"Limpar pesquisa"};var ne={};ne={"Clear search":"Ştergeţi căutarea"};var se={};se={"Clear search":"Очистить поиск"};var le={};le={"Clear search":"Vymazať vyhľadávanie"};var oe={};oe={"Clear search":"Počisti iskanje"};var ie={};ie={"Clear search":"Obriši pretragu"};var ue={};ue={"Clear search":"Rensa sökning"};var ce={};ce={"Clear search":"Aramayı temizle"};var de={};de={"Clear search":"Очистити пошук"};var fe={};fe={"Clear search":"清除搜索"};var pe={};pe={"Clear search":"清除搜尋條件"};var he={};he={"ar-AE":T,"bg-BG":A,"cs-CZ":N,"da-DK":O,"de-DE":F,"el-GR":L,"en-US":q,"es-ES":z,"et-EE":H,"fi-FI":M,"fr-FR":K,"he-IL":W,"hr-HR":U,"hu-HU":j,"it-IT":G,"ja-JP":Z,"ko-KR":J,"lt-LT":Y,"lv-LV":Q,"nb-NO":X,"nl-NL":ee,"pl-PL":ae,"pt-BR":te,"pt-PT":re,"ro-RO":ne,"ru-RU":se,"sk-SK":le,"sl-SI":oe,"sr-SP":ie,"sv-SE":ue,"tr-TR":ce,"uk-UA":de,"zh-CN":fe,"zh-TW":pe};function Te(e){return e&&e.__esModule?e.default:e}function Ae(e,a,t){let i=Be(Te(he),"@react-aria/searchfield"),{isDisabled:r,isReadOnly:s,onSubmit:u,onClear:l,type:c="search"}=e,f=o=>{const x=o.key;x==="Enter"&&(r||s)&&o.preventDefault(),!(r||s)&&(x==="Enter"&&u&&(o.preventDefault(),u(a.value)),x==="Escape"&&(a.value===""&&(!t.current||t.current.value==="")?o.continuePropagation():(o.preventDefault(),a.setValue(""),l&&l())))},$=()=>{a.setValue(""),l&&l()},p=()=>{var o;(o=t.current)===null||o===void 0||o.focus()},{labelProps:d,inputProps:h,descriptionProps:v,errorMessageProps:C,...b}=_e({...e,value:a.value,onChange:a.setValue,onKeyDown:s?e.onKeyDown:Ee(f,e.onKeyDown),type:c},t);return{labelProps:d,inputProps:{...h,defaultValue:void 0},clearButtonProps:{"aria-label":i.format("Clear search"),excludeFromTabOrder:!0,preventFocusOnPress:!0,isDisabled:r||s,onPress:$,onPressStart:p},descriptionProps:v,errorMessageProps:C,...b}}function Ne(e){let[a,t]=R(D(e.value),D(e.defaultValue)||"",e.onChange);return{value:a,setValue:t}}function D(e){if(e!=null)return e.toString()}var Oe=B({defaultClassName:"_1p4n4812 tq83zq0",variantClassNames:{},defaultVariants:{},compoundVariants:[]}),Fe=B({defaultClassName:"_1p4n4813 _1p4n4810 _1p4n4811",variantClassNames:{},defaultVariants:{},compoundVariants:[]}),Le=B({defaultClassName:"_1p4n4815 _1p4n4814 onxwjuev onxwjudb",variantClassNames:{},defaultVariants:{},compoundVariants:[]}),qe="_1p4n4816";const ze={label:"Search"},He=e=>{const a=n.useRef(null),{buttonProps:t}=we(e,a);return n.createElement("button",{...t,className:e.className,ref:a},e.children)},P=e=>{const{label:a,placeholder:t,ref:i}=e,r=a??(t==null?void 0:t.length)?t:ze.label,s={...e,"aria-label":r,placeholder:r},u=Ne(s),l=n.useRef(null),c=n.useRef(null),{clearButtonProps:f,inputProps:$}=Ae(s,u,l),{focusProps:p,isFocused:d,isFocusVisible:h}=Pe(s),v=()=>{var b;(b=l.current)==null||b.focus()},C=()=>u.value===""?null:n.createElement(He,{className:Le({}),...f},n.createElement(w,{icon:Re,size:"100%"}));return n.createElement("div",{className:Oe({}),onClick:v,ref:c,...ve({disabled:s.isDisabled,focus:d,"focus-visible":h,testid:s.testId})},n.createElement("div",null,n.createElement(w,{icon:ke,size:"large"})),n.createElement("div",{className:qe},n.createElement("input",{..._($,p),className:Fe({}),ref:Ce([l,i])}),n.createElement(C,null)))};try{P.displayName="SearchBar",P.__docgenInfo={description:"Oversized search bar implemented via the react-aria `useSearchField` hook\n([docs](https://react-spectrum.adobe.com/react-aria/useSearchField.html)). This search bar is used primarily in\ncombination with the `OptionGrid` in order to filter displayed options and can be reset once text is entered.\n\nThis field does not have a visible label, so an placeholder text is used as `aria-label`.\nIt is recommended to use the `onChange` prop to handle the input content, uncontrolled.",displayName:"SearchBar",props:{onChange:{defaultValue:null,description:"Handler that is called when the value changes.",name:"onChange",required:!1,type:{name:"((value: string) => void)"}},isDisabled:{defaultValue:null,description:"Whether the input is disabled.",name:"isDisabled",required:!1,type:{name:"boolean"}},maxLength:{defaultValue:null,description:"The maximum number of characters supported by the input. See [MDN](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#htmlattrdefmaxlength).",name:"maxLength",required:!1,type:{name:"number"}},placeholder:{defaultValue:null,description:"The placeholder text is also used as the aria-label since the SearchBar does not have a label element",name:"placeholder",required:!0,type:{name:"string"}},lang:{defaultValue:null,description:"Language content override",name:"lang",required:!1,type:{name:'Partial<Record<"label" | "clear", string>>'}},ref:{defaultValue:null,description:"Optional forwarded ref for the input element (React 19)",name:"ref",required:!1,type:{name:"Ref<HTMLInputElement>"}},testId:{defaultValue:null,description:"The test ID will be rendered as a data attribute on the element for e2e testing purposes",name:"testId",required:!1,type:{name:"string"}}}}}catch{}const{expect:m,fn:Me,within:Ke,userEvent:S}=__STORYBOOK_MODULE_TEST__,na={title:"Forms & Input Fields/Search Bar",component:P,args:{placeholder:"Search for tasks",onChange:Me(),lang:{label:"Search for tasks",clear:"clear search"},maxLength:25,isDisabled:!1,testId:"demo-search-bar"},tags:["beta"]},E="Test search phrase",y={play:async({args:e,canvasElement:a,step:t})=>{const i=Ke(a),r=i.getAllByRole("searchbox")[0];await t("Initial state",async()=>{await m(r).toHaveAccessibleName(e.placeholder??e.label)}),r.focus(),await t("Enter text into the search field",async()=>{await S.type(r,E),await m(e.onChange).toBeCalledWith(E),await m(r).toHaveValue(E),await m(r).toHaveFocus()}),await t("Clearing the search field",async()=>{await m(i.getAllByRole("button")[0]).toBeVisible(),await S.keyboard("{Esc}"),await m(r).toHaveValue("")}),r.blur()}};var V,I,k;y.parameters={...y.parameters,docs:{...(V=y.parameters)==null?void 0:V.docs,source:{originalSource:`{
  play: async ({
    args,
    canvasElement,
    step
  }) => {
    const canvas = within(canvasElement);
    const field = canvas.getAllByRole('searchbox')[0];
    await step('Initial state', async () => {
      await expect(field).toHaveAccessibleName(args.placeholder ?? args.label);
    });
    field.focus(); // react-aria seems to need this event to register interactions
    await step('Enter text into the search field', async () => {
      await userEvent.type(field, testPhrase);
      await expect(args.onChange).toBeCalledWith(testPhrase);
      await expect(field).toHaveValue(testPhrase);
      await expect(field).toHaveFocus();
    });
    await step('Clearing the search field', async () => {
      await expect(canvas.getAllByRole('button')[0]).toBeVisible();
      await userEvent.keyboard('{Esc}');
      await expect(field).toHaveValue('');
    });
    field.blur();
  }
}`,...(k=(I=y.parameters)==null?void 0:I.docs)==null?void 0:k.source}}};const sa=["TaskSearch"];export{y as TaskSearch,sa as __namedExportsOrder,na as default};
