import{r as B,e as s,z as $e,C as ve,s as xe,K as Ce}from"./iframe-CmQjDVxl.js";import{w as I,$ as ge,N as ye,a as k,A as Ee}from"./useFocusable-trXtkuyV.js";import{$ as we}from"./useLocalizedStringFormatter-DCrmyYBr.js";import{a as Pe}from"./usePress-CWHY-Jfn.js";import{$ as Be}from"./useFormReset-obkxA-Y4.js";import{$ as De,c as Se,a as Ve}from"./useField-B9pyENdw.js";import{$ as _e}from"./useFocusRing-DRv-m-Cg.js";import{I as D}from"./Icon-BLKl0fsw.js";import{I as Ie}from"./MagnifyIcon-BojsZFYW.js";import{I as ke}from"./CloseIcon-BP-bLiEC.js";import{$ as Re}from"./useButton-C1a93kdQ.js";import"./preload-helper-PPVm8Dsz.js";import"./context-Dwu0AyBG.js";import"./index-D1dsTOPy.js";import"./index-DoeGN9DL.js";import"./useLabel-CCFySnfK.js";import"./useLabels-BHtib-sb.js";import"./useFocusWithin-D3qYE42n.js";import"./resolveResponsiveProps-BErviP19.js";function Te(e,a){let{inputElementType:t="input",isDisabled:i=!1,isRequired:r=!1,isReadOnly:n=!1,type:c="text",validationBehavior:l="aria"}=e,[d,f]=I(e.value,e.defaultValue||"",e.onChange),{focusableProps:m}=ge(e,a),p=De({...e,value:d}),{isInvalid:u,validationErrors:h,validationDetails:$}=p.displayValidation,{labelProps:v,fieldProps:x,descriptionProps:o,errorMessageProps:C}=Se({...e,isInvalid:u,errorMessage:e.errorMessage||h}),he=Pe(e,{labelable:!0});const be={type:c,pattern:e.pattern};let[me]=B.useState(d);var E;return Be(a,(E=e.defaultValue)!==null&&E!==void 0?E:me,f),Ve(e,p,a),B.useEffect(()=>{if(a.current instanceof ye(a.current).HTMLTextAreaElement){let g=a.current;Object.defineProperty(g,"defaultValue",{get:()=>g.value,set:()=>{},configurable:!0})}},[a]),{labelProps:v,inputProps:k(he,t==="input"?be:void 0,{disabled:i,readOnly:n,required:r&&l==="native","aria-required":r&&l==="aria"||void 0,"aria-invalid":u||void 0,"aria-errormessage":e["aria-errormessage"],"aria-activedescendant":e["aria-activedescendant"],"aria-autocomplete":e["aria-autocomplete"],"aria-haspopup":e["aria-haspopup"],"aria-controls":e["aria-controls"],value:d,onChange:g=>f(g.target.value),autoComplete:e.autoComplete,autoCapitalize:e.autoCapitalize,maxLength:e.maxLength,minLength:e.minLength,name:e.name,form:e.form,placeholder:e.placeholder,inputMode:e.inputMode,autoCorrect:e.autoCorrect,spellCheck:e.spellCheck,[parseInt(s.version,10)>=17?"enterKeyHint":"enterkeyhint"]:e.enterKeyHint,onCopy:e.onCopy,onCut:e.onCut,onPaste:e.onPaste,onCompositionEnd:e.onCompositionEnd,onCompositionStart:e.onCompositionStart,onCompositionUpdate:e.onCompositionUpdate,onSelect:e.onSelect,onBeforeInput:e.onBeforeInput,onInput:e.onInput,...m,...x}),descriptionProps:o,errorMessageProps:C,isInvalid:u,validationErrors:h,validationDetails:$}}var R={};R={"Clear search":"مسح البحث"};var T={};T={"Clear search":"Изчистване на търсене"};var j={};j={"Clear search":"Vymazat hledání"};var A={};A={"Clear search":"Ryd søgning"};var F={};F={"Clear search":"Suche zurücksetzen"};var O={};O={"Clear search":"Απαλοιφή αναζήτησης"};var L={};L={"Clear search":"Clear search"};var N={};N={"Clear search":"Borrar búsqueda"};var z={};z={"Clear search":"Tühjenda otsing"};var q={};q={"Clear search":"Tyhjennä haku"};var H={};H={"Clear search":"Effacer la recherche"};var M={};M={"Clear search":"נקה חיפוש"};var K={};K={"Clear search":"Obriši pretragu"};var W={};W={"Clear search":"Keresés törlése"};var U={};U={"Clear search":"Cancella ricerca"};var G={};G={"Clear search":"検索をクリア"};var Z={};Z={"Clear search":"검색 지우기"};var J={};J={"Clear search":"Išvalyti iešką"};var Y={};Y={"Clear search":"Notīrīt meklēšanu"};var Q={};Q={"Clear search":"Tøm søk"};var X={};X={"Clear search":"Zoekactie wissen"};var ee={};ee={"Clear search":"Wyczyść zawartość wyszukiwania"};var ae={};ae={"Clear search":"Limpar pesquisa"};var te={};te={"Clear search":"Limpar pesquisa"};var re={};re={"Clear search":"Ştergeţi căutarea"};var ne={};ne={"Clear search":"Очистить поиск"};var se={};se={"Clear search":"Vymazať vyhľadávanie"};var le={};le={"Clear search":"Počisti iskanje"};var oe={};oe={"Clear search":"Obriši pretragu"};var ie={};ie={"Clear search":"Rensa sökning"};var ue={};ue={"Clear search":"Aramayı temizle"};var ce={};ce={"Clear search":"Очистити пошук"};var de={};de={"Clear search":"清除搜索"};var fe={};fe={"Clear search":"清除搜尋條件"};var pe={};pe={"ar-AE":R,"bg-BG":T,"cs-CZ":j,"da-DK":A,"de-DE":F,"el-GR":O,"en-US":L,"es-ES":N,"et-EE":z,"fi-FI":q,"fr-FR":H,"he-IL":M,"hr-HR":K,"hu-HU":W,"it-IT":U,"ja-JP":G,"ko-KR":Z,"lt-LT":J,"lv-LV":Y,"nb-NO":Q,"nl-NL":X,"pl-PL":ee,"pt-BR":ae,"pt-PT":te,"ro-RO":re,"ru-RU":ne,"sk-SK":se,"sl-SI":le,"sr-SP":oe,"sv-SE":ie,"tr-TR":ue,"uk-UA":ce,"zh-CN":de,"zh-TW":fe};function je(e){return e&&e.__esModule?e.default:e}function Ae(e,a,t){let i=we(je(pe),"@react-aria/searchfield"),{isDisabled:r,isReadOnly:n,onSubmit:c,onClear:l,type:d="search"}=e,f=o=>{const C=o.key;C==="Enter"&&(r||n)&&o.preventDefault(),!(r||n)&&(C==="Enter"&&c&&(o.preventDefault(),c(a.value)),C==="Escape"&&(a.value===""&&(!t.current||t.current.value==="")?o.continuePropagation():(o.preventDefault(),a.setValue(""),l&&l())))},m=()=>{a.setValue(""),l&&l()},p=()=>{var o;(o=t.current)===null||o===void 0||o.focus()},{labelProps:u,inputProps:h,descriptionProps:$,errorMessageProps:v,...x}=Te({...e,value:a.value,onChange:a.setValue,onKeyDown:n?e.onKeyDown:Ee(f,e.onKeyDown),type:d},t);return{labelProps:u,inputProps:{...h,defaultValue:void 0},clearButtonProps:{"aria-label":i.format("Clear search"),excludeFromTabOrder:!0,preventFocusOnPress:!0,isDisabled:r||n,onPress:m,onPressStart:p},descriptionProps:$,errorMessageProps:v,...x}}function Fe(e){let[a,t]=I(S(e.value),S(e.defaultValue)||"",e.onChange);return{value:a,setValue:t}}function S(e){if(e!=null)return e.toString()}var Oe="_1p4n4812 tq83zq0",Le="_1p4n4813 _1p4n4810 _1p4n4811",Ne=$e({defaultClassName:"_1p4n4818 _1p4n4814 onxwju2m onxwju2k onxwju2o onxwju2q onxwjugd onxwjuet onxwjuu9 onxwjuvd onxwjuwh onxwjuxl onxwjumt onxwjuoh onxwju5i onxwju63 onxwju8h",variantClassNames:{hasValue:{false:"_1p4n4819"},isFocused:{false:"_1p4n481a"}},defaultVariants:{},compoundVariants:[[{hasValue:!1},"_1p4n4815 onxwju69"],[{hasValue:!0,isFocused:!1},"_1p4n4816 onxwju5j onxwju64"],[{hasValue:!0,isFocused:!0},"_1p4n4817 onxwju6l"]]}),ze="_1p4n481b";const V={label:"Search",clear:"clear search"},qe=e=>{const a=s.useRef(null),{buttonProps:t}=Re(e,a);return s.createElement("button",{...t,className:e.className,ref:a},e.children)},P=e=>{const{label:a,placeholder:t,ref:i}=e,r=a??t?.length?t:V.label,n={...e,"aria-label":r,placeholder:r},c=Fe(n),l=s.useRef(null),d=s.useRef(null),{clearButtonProps:f,inputProps:m}=Ae(n,c,l),{focusProps:p,isFocused:u,isFocusVisible:h}=_e(n),$=()=>{l.current?.focus()},v=()=>{const x=c.value!=="";return s.createElement(qe,{className:Ne({hasValue:x,isFocused:u}),"aria-label":e.lang?.clear??V.clear,...f},s.createElement(D,{icon:ke,size:"100%"}))};return s.createElement("div",{className:Oe,onClick:$,ref:d,...ve({disabled:n.isDisabled,focus:u,"focus-visible":h,testid:n.testId})},s.createElement(D,{className:xe({flexShrink:"0"}),icon:Ie,size:"large"}),s.createElement("div",{className:ze},s.createElement("input",{...k(m,p),className:Le,ref:Ce([l,i])}),s.createElement(v,null)))};try{P.displayName="SearchBar",P.__docgenInfo={description:"Oversized search bar implemented via the react-aria `useSearchField` hook\n([docs](https://react-spectrum.adobe.com/react-aria/useSearchField.html)). This search bar is used primarily in\ncombination with the `OptionGrid` in order to filter displayed options and can be reset once text is entered.\n\nThis field does not have a visible label, so an placeholder text is used as `aria-label`.\nIt is recommended to use the `onChange` prop to handle the input content, uncontrolled.",displayName:"SearchBar",props:{onChange:{defaultValue:null,description:"Handler that is called when the value changes.",name:"onChange",required:!1,type:{name:"((value: string) => void)"}},isDisabled:{defaultValue:null,description:"Whether the input is disabled.",name:"isDisabled",required:!1,type:{name:"boolean"}},maxLength:{defaultValue:null,description:"The maximum number of characters supported by the input. See [MDN](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#htmlattrdefmaxlength).",name:"maxLength",required:!1,type:{name:"number"}},placeholder:{defaultValue:null,description:"The placeholder text is also used as the aria-label since the SearchBar does not have a label element",name:"placeholder",required:!0,type:{name:"string"}},lang:{defaultValue:null,description:"Language content override",name:"lang",required:!1,type:{name:'Partial<Record<"label" | "clear", string>>'}},ref:{defaultValue:null,description:"Optional forwarded ref for the input element (React 19)",name:"ref",required:!1,type:{name:"Ref<HTMLInputElement>"}},testId:{defaultValue:null,description:"The test ID will be rendered as a data attribute `data-testid` on the element for use with test assertions",name:"testId",required:!1,type:{name:"string"}}}}}catch{}const{expect:b,fn:He,within:Me,userEvent:_}=__STORYBOOK_MODULE_TEST__,ca={title:"Forms & Input Fields/Search Bar",component:P,args:{placeholder:"Search for tasks",onChange:He(),lang:{label:"Search for tasks",clear:"clear search"},maxLength:25,isDisabled:!1,testId:"demo-search-bar"},tags:["beta"]},w="Test search phrase",y={play:async({args:e,canvasElement:a,step:t})=>{const i=Me(a),r=i.getAllByRole("searchbox")[0];await t("Initial state",async()=>{await b(r).toHaveAccessibleName(e.placeholder??e.label)}),r.focus(),await t("Enter text into the search field",async()=>{await _.type(r,w),await b(e.onChange).toBeCalledWith(w),await b(r).toHaveValue(w),await b(r).toHaveFocus()}),await t("Clearing the search field",async()=>{await b(i.getAllByRole("button")[0]).toBeVisible(),await _.keyboard("{Esc}"),await b(r).toHaveValue("")}),r.blur()}};y.parameters={...y.parameters,docs:{...y.parameters?.docs,source:{originalSource:`{
  play: async ({
    args,
    canvasElement,
    step
  }) => {
    const canvas = within(canvasElement);
    const field = canvas.getAllByRole('searchbox')[0];
    await step('Initial state', async () => {
      await expect(field).toHaveAccessibleName(args.placeholder ?? args.label);
    });
    field.focus(); // react-aria seems to need this event to register interactions
    await step('Enter text into the search field', async () => {
      await userEvent.type(field, testPhrase);
      await expect(args.onChange).toBeCalledWith(testPhrase);
      await expect(field).toHaveValue(testPhrase);
      await expect(field).toHaveFocus();
    });
    await step('Clearing the search field', async () => {
      await expect(canvas.getAllByRole('button')[0]).toBeVisible();
      await userEvent.keyboard('{Esc}');
      await expect(field).toHaveValue('');
    });
    field.blur();
  }
}`,...y.parameters?.docs?.source}}};const da=["TaskSearch"];export{y as TaskSearch,da as __namedExportsOrder,ca as default};
