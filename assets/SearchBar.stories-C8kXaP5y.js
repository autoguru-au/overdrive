import{r as he,e as n,z as B,C as be,K as me}from"./iframe-C_ToDWZR.js";import{f as V,c as $e,e as ve,m as Ce,d as I,n as xe,k as ge}from"./useFocusRing-Wi7BowzE.js";import{$ as ye,a as Ee}from"./useButton-DeV7wq2J.js";import{$ as Pe}from"./useFormReset-2Rxhqwrx.js";import{$ as Be,c as we,a as De}from"./useField-DY19GHk4.js";import{I as w}from"./Icon-B1NaPOMJ.js";import{I as Se}from"./MagnifyIcon-CnmF1akU.js";import{I as Ve}from"./CloseIcon-MRhUCIYu.js";import"./preload-helper-D9Z9MdNV.js";import"./index-C1mDI6Gs.js";import"./index-BokhajKM.js";import"./context-DPu1ZNS4.js";import"./useLabel-ERkbc5ES.js";import"./resolveResponsiveProps-D4tqr0Ct.js";function Ie(e,a){let{inputElementType:t="input",isDisabled:i=!1,isRequired:r=!1,isReadOnly:s=!1,type:u="text",validationBehavior:l="aria"}=e,[c,f]=V(e.value,e.defaultValue||"",e.onChange),{focusableProps:m}=$e(e,a),p=Be({...e,value:c}),{isInvalid:d,validationErrors:h,validationDetails:$}=p.displayValidation,{labelProps:v,fieldProps:y,descriptionProps:o,errorMessageProps:C}=we({...e,isInvalid:d,errorMessage:e.errorMessage||h}),fe=ve(e,{labelable:!0});const pe={type:u,pattern:e.pattern};return Pe(a,c,f),De(e,p,a),he.useEffect(()=>{if(a.current instanceof Ce(a.current).HTMLTextAreaElement){let x=a.current;Object.defineProperty(x,"defaultValue",{get:()=>x.value,set:()=>{},configurable:!0})}},[a]),{labelProps:v,inputProps:I(fe,t==="input"?pe:void 0,{disabled:i,readOnly:s,required:r&&l==="native","aria-required":r&&l==="aria"||void 0,"aria-invalid":d||void 0,"aria-errormessage":e["aria-errormessage"],"aria-activedescendant":e["aria-activedescendant"],"aria-autocomplete":e["aria-autocomplete"],"aria-haspopup":e["aria-haspopup"],"aria-controls":e["aria-controls"],value:c,onChange:x=>f(x.target.value),autoComplete:e.autoComplete,autoCapitalize:e.autoCapitalize,maxLength:e.maxLength,minLength:e.minLength,name:e.name,placeholder:e.placeholder,inputMode:e.inputMode,autoCorrect:e.autoCorrect,spellCheck:e.spellCheck,[parseInt(n.version,10)>=17?"enterKeyHint":"enterkeyhint"]:e.enterKeyHint,onCopy:e.onCopy,onCut:e.onCut,onPaste:e.onPaste,onCompositionEnd:e.onCompositionEnd,onCompositionStart:e.onCompositionStart,onCompositionUpdate:e.onCompositionUpdate,onSelect:e.onSelect,onBeforeInput:e.onBeforeInput,onInput:e.onInput,...m,...y}),descriptionProps:o,errorMessageProps:C,isInvalid:d,validationErrors:h,validationDetails:$}}var k={};k={"Clear search":"مسح البحث"};var R={};R={"Clear search":"Изчистване на търсене"};var _={};_={"Clear search":"Vymazat hledání"};var T={};T={"Clear search":"Ryd søgning"};var A={};A={"Clear search":"Suche zurücksetzen"};var N={};N={"Clear search":"Απαλοιφή αναζήτησης"};var O={};O={"Clear search":"Clear search"};var F={};F={"Clear search":"Borrar búsqueda"};var L={};L={"Clear search":"Tühjenda otsing"};var z={};z={"Clear search":"Tyhjennä haku"};var q={};q={"Clear search":"Effacer la recherche"};var H={};H={"Clear search":"נקה חיפוש"};var M={};M={"Clear search":"Obriši pretragu"};var K={};K={"Clear search":"Keresés törlése"};var W={};W={"Clear search":"Cancella ricerca"};var U={};U={"Clear search":"検索をクリア"};var j={};j={"Clear search":"검색 지우기"};var G={};G={"Clear search":"Išvalyti iešką"};var Z={};Z={"Clear search":"Notīrīt meklēšanu"};var J={};J={"Clear search":"Tøm søk"};var Y={};Y={"Clear search":"Zoekactie wissen"};var Q={};Q={"Clear search":"Wyczyść zawartość wyszukiwania"};var X={};X={"Clear search":"Limpar pesquisa"};var ee={};ee={"Clear search":"Limpar pesquisa"};var ae={};ae={"Clear search":"Ştergeţi căutarea"};var te={};te={"Clear search":"Очистить поиск"};var re={};re={"Clear search":"Vymazať vyhľadávanie"};var ne={};ne={"Clear search":"Počisti iskanje"};var se={};se={"Clear search":"Obriši pretragu"};var le={};le={"Clear search":"Rensa sökning"};var oe={};oe={"Clear search":"Aramayı temizle"};var ie={};ie={"Clear search":"Очистити пошук"};var ue={};ue={"Clear search":"清除搜索"};var ce={};ce={"Clear search":"清除搜尋條件"};var de={};de={"ar-AE":k,"bg-BG":R,"cs-CZ":_,"da-DK":T,"de-DE":A,"el-GR":N,"en-US":O,"es-ES":F,"et-EE":L,"fi-FI":z,"fr-FR":q,"he-IL":H,"hr-HR":M,"hu-HU":K,"it-IT":W,"ja-JP":U,"ko-KR":j,"lt-LT":G,"lv-LV":Z,"nb-NO":J,"nl-NL":Y,"pl-PL":Q,"pt-BR":X,"pt-PT":ee,"ro-RO":ae,"ru-RU":te,"sk-SK":re,"sl-SI":ne,"sr-SP":se,"sv-SE":le,"tr-TR":oe,"uk-UA":ie,"zh-CN":ue,"zh-TW":ce};function ke(e){return e&&e.__esModule?e.default:e}function Re(e,a,t){let i=ye(ke(de),"@react-aria/searchfield"),{isDisabled:r,isReadOnly:s,onSubmit:u,onClear:l,type:c="search"}=e,f=o=>{const C=o.key;C==="Enter"&&(r||s)&&o.preventDefault(),!(r||s)&&(C==="Enter"&&u&&(o.preventDefault(),u(a.value)),C==="Escape"&&(a.value===""&&(!t.current||t.current.value==="")?o.continuePropagation():(o.preventDefault(),a.setValue(""),l&&l())))},m=()=>{a.setValue(""),l&&l()},p=()=>{var o;(o=t.current)===null||o===void 0||o.focus()},{labelProps:d,inputProps:h,descriptionProps:$,errorMessageProps:v,...y}=Ie({...e,value:a.value,onChange:a.setValue,onKeyDown:s?e.onKeyDown:xe(f,e.onKeyDown),type:c},t);return{labelProps:d,inputProps:{...h,defaultValue:void 0},clearButtonProps:{"aria-label":i.format("Clear search"),excludeFromTabOrder:!0,preventFocusOnPress:!0,isDisabled:r||s,onPress:m,onPressStart:p},descriptionProps:$,errorMessageProps:v,...y}}function _e(e){let[a,t]=V(D(e.value),D(e.defaultValue)||"",e.onChange);return{value:a,setValue:t}}function D(e){if(e!=null)return e.toString()}var Te=B({defaultClassName:"_1p4n4812 tq83zq0",variantClassNames:{},defaultVariants:{},compoundVariants:[]}),Ae=B({defaultClassName:"_1p4n4813 _1p4n4810 _1p4n4811",variantClassNames:{},defaultVariants:{},compoundVariants:[]}),Ne=B({defaultClassName:"_1p4n4815 _1p4n4814 onxwjugd onxwjuet",variantClassNames:{},defaultVariants:{},compoundVariants:[]}),Oe="_1p4n4816";const Fe={label:"Search"},Le=e=>{const a=n.useRef(null),{buttonProps:t}=Ee(e,a);return n.createElement("button",{...t,className:e.className,ref:a},e.children)},P=e=>{const{label:a,placeholder:t,ref:i}=e,r=a??t?.length?t:Fe.label,s={...e,"aria-label":r,placeholder:r},u=_e(s),l=n.useRef(null),c=n.useRef(null),{clearButtonProps:f,inputProps:m}=Re(s,u,l),{focusProps:p,isFocused:d,isFocusVisible:h}=ge(s),$=()=>{l.current?.focus()},v=()=>u.value===""?null:n.createElement(Le,{className:Ne({}),...f},n.createElement(w,{icon:Ve,size:"100%"}));return n.createElement("div",{className:Te({}),onClick:$,ref:c,...be({disabled:s.isDisabled,focus:d,"focus-visible":h,testid:s.testId})},n.createElement("div",null,n.createElement(w,{icon:Se,size:"large"})),n.createElement("div",{className:Oe},n.createElement("input",{...I(m,p),className:Ae({}),ref:me([l,i])}),n.createElement(v,null)))};try{P.displayName="SearchBar",P.__docgenInfo={description:"Oversized search bar implemented via the react-aria `useSearchField` hook\n([docs](https://react-spectrum.adobe.com/react-aria/useSearchField.html)). This search bar is used primarily in\ncombination with the `OptionGrid` in order to filter displayed options and can be reset once text is entered.\n\nThis field does not have a visible label, so an placeholder text is used as `aria-label`.\nIt is recommended to use the `onChange` prop to handle the input content, uncontrolled.",displayName:"SearchBar",props:{onChange:{defaultValue:null,description:"Handler that is called when the value changes.",name:"onChange",required:!1,type:{name:"((value: string) => void)"}},isDisabled:{defaultValue:null,description:"Whether the input is disabled.",name:"isDisabled",required:!1,type:{name:"boolean"}},maxLength:{defaultValue:null,description:"The maximum number of characters supported by the input. See [MDN](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#htmlattrdefmaxlength).",name:"maxLength",required:!1,type:{name:"number"}},placeholder:{defaultValue:null,description:"The placeholder text is also used as the aria-label since the SearchBar does not have a label element",name:"placeholder",required:!0,type:{name:"string"}},lang:{defaultValue:null,description:"Language content override",name:"lang",required:!1,type:{name:'Partial<Record<"label" | "clear", string>>'}},ref:{defaultValue:null,description:"Optional forwarded ref for the input element (React 19)",name:"ref",required:!1,type:{name:"Ref<HTMLInputElement>"}},testId:{defaultValue:null,description:"The test ID will be rendered as a data attribute `data-testid` on the element for use with test assertions",name:"testId",required:!1,type:{name:"string"}}}}}catch{}const{expect:b,fn:ze,within:qe,userEvent:S}=__STORYBOOK_MODULE_TEST__,ta={title:"Forms & Input Fields/Search Bar",component:P,args:{placeholder:"Search for tasks",onChange:ze(),lang:{label:"Search for tasks",clear:"clear search"},maxLength:25,isDisabled:!1,testId:"demo-search-bar"},tags:["beta"]},E="Test search phrase",g={play:async({args:e,canvasElement:a,step:t})=>{const i=qe(a),r=i.getAllByRole("searchbox")[0];await t("Initial state",async()=>{await b(r).toHaveAccessibleName(e.placeholder??e.label)}),r.focus(),await t("Enter text into the search field",async()=>{await S.type(r,E),await b(e.onChange).toBeCalledWith(E),await b(r).toHaveValue(E),await b(r).toHaveFocus()}),await t("Clearing the search field",async()=>{await b(i.getAllByRole("button")[0]).toBeVisible(),await S.keyboard("{Esc}"),await b(r).toHaveValue("")}),r.blur()}};g.parameters={...g.parameters,docs:{...g.parameters?.docs,source:{originalSource:`{
  play: async ({
    args,
    canvasElement,
    step
  }) => {
    const canvas = within(canvasElement);
    const field = canvas.getAllByRole('searchbox')[0];
    await step('Initial state', async () => {
      await expect(field).toHaveAccessibleName(args.placeholder ?? args.label);
    });
    field.focus(); // react-aria seems to need this event to register interactions
    await step('Enter text into the search field', async () => {
      await userEvent.type(field, testPhrase);
      await expect(args.onChange).toBeCalledWith(testPhrase);
      await expect(field).toHaveValue(testPhrase);
      await expect(field).toHaveFocus();
    });
    await step('Clearing the search field', async () => {
      await expect(canvas.getAllByRole('button')[0]).toBeVisible();
      await userEvent.keyboard('{Esc}');
      await expect(field).toHaveValue('');
    });
    field.blur();
  }
}`,...g.parameters?.docs?.source}}};const ra=["TaskSearch"];export{g as TaskSearch,ra as __namedExportsOrder,ta as default};
