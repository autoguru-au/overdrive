import{f as ue,w as ge,g as $e,e as b,u as H}from"./index-iKjZeQ6o.js";import{r as m,R as p}from"./index-sWIihdb-.js";import{$ as we,d as M,I as Ve}from"./IconTick-BmEquoqh.js";import{c as me,o as q}from"./createRuntimeFn-62c9670f.esm-CnJ6bNUW.js";import{j as Ie,c as B,k as Ce,h as Ee,e as O,l as F,i as ke,m as Se,b as Le,a as je}from"./useFocusRing-CfK7eTI1.js";import{$ as Oe,a as _e}from"./useToggle-UdagcgT-.js";import{V as Pe}from"./VisuallyHidden-BoKryw55.js";import"./_commonjsHelpers-C932wzq6.js";import"./Box-j8EUPCOH.js";const N={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},pe={...N,customError:!0,valid:!1},w={isInvalid:!1,validationDetails:N,validationErrors:[]},De=m.createContext({}),j="__formValidationState"+Date.now();function A(e){if(e[j]){let{realtimeValidation:a,displayValidation:t,updateValidation:i,resetValidation:r,commitValidation:l}=e[j];return{realtimeValidation:a,displayValidation:t,updateValidation:i,resetValidation:r,commitValidation:l}}return Be(e)}function Be(e){let{isInvalid:a,validationState:t,name:i,value:r,builtinValidation:l,validate:s,validationBehavior:o="aria"}=e;t&&(a||(a=t==="invalid"));let d=a!==void 0?{isInvalid:a,validationErrors:[],validationDetails:pe}:null,n=m.useMemo(()=>{if(!s||r==null)return null;let v=Re(s,r);return W(v)},[s,r]);l!=null&&l.validationDetails.valid&&(l=void 0);let c=m.useContext(De),u=m.useMemo(()=>i?Array.isArray(i)?i.flatMap(v=>T(c[v])):T(c[i]):[],[c,i]),[x,$]=m.useState(c),[y,g]=m.useState(!1);c!==x&&($(c),g(!1));let h=m.useMemo(()=>W(y?[]:u),[y,u]),I=m.useRef(w),[C,P]=m.useState(w),L=m.useRef(w),xe=()=>{if(!ye)return;D(!1);let v=n||l||I.current;R(v,L.current)||(L.current=v,P(v))},[ye,D]=m.useState(!1);return m.useEffect(xe),{realtimeValidation:d||h||n||l||w,displayValidation:o==="native"?d||h||C:d||h||n||l||C,updateValidation(v){o==="aria"&&!R(C,v)?P(v):I.current=v},resetValidation(){let v=w;R(v,L.current)||(L.current=v,P(v)),o==="native"&&D(!1),g(!0)},commitValidation(){o==="native"&&D(!0),g(!0)}}}function T(e){return e?Array.isArray(e)?e:[e]:[]}function Re(e,a){if(typeof e=="function"){let t=e(a);if(t&&typeof t!="boolean")return T(t)}return[]}function W(e){return e.length?{isInvalid:!0,validationErrors:e,validationDetails:pe}:null}function R(e,a){return e===a?!0:!!e&&!!a&&e.isInvalid===a.isInvalid&&e.validationErrors.length===a.validationErrors.length&&e.validationErrors.every((t,i)=>t===a.validationErrors[i])&&Object.entries(e.validationDetails).every(([t,i])=>a.validationDetails[t]===i)}function Me(...e){let a=new Set,t=!1,i={...N};for(let s of e){var r,l;for(let o of s.validationErrors)a.add(o);t||(t=s.isInvalid);for(let o in i)(r=i)[l=o]||(r[l]=s.validationDetails[o])}return i.valid=!t,{isInvalid:t,validationErrors:[...a],validationDetails:i}}function qe(e,a,t){let{validationBehavior:i,focus:r}=e;Ie(()=>{if(i==="native"&&(t!=null&&t.current)){let d=a.realtimeValidation.isInvalid?a.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";t.current.setCustomValidity(d),t.current.hasAttribute("title")||(t.current.title=""),a.realtimeValidation.isInvalid||a.updateValidation(Ne(t.current))}});let l=B(()=>{a.resetValidation()}),s=B(d=>{var n;a.displayValidation.isInvalid||a.commitValidation();let c=t==null||(n=t.current)===null||n===void 0?void 0:n.form;if(!d.defaultPrevented&&t&&c&&Ae(c)===t.current){var u;r?r():(u=t.current)===null||u===void 0||u.focus(),Ce("keyboard")}d.preventDefault()}),o=B(()=>{a.commitValidation()});m.useEffect(()=>{let d=t==null?void 0:t.current;if(!d)return;let n=d.form;return d.addEventListener("invalid",s),d.addEventListener("change",o),n==null||n.addEventListener("reset",l),()=>{d.removeEventListener("invalid",s),d.removeEventListener("change",o),n==null||n.removeEventListener("reset",l)}},[t,s,o,l,i])}function Te(e){let a=e.validity;return{badInput:a.badInput,customError:a.customError,patternMismatch:a.patternMismatch,rangeOverflow:a.rangeOverflow,rangeUnderflow:a.rangeUnderflow,stepMismatch:a.stepMismatch,tooLong:a.tooLong,tooShort:a.tooShort,typeMismatch:a.typeMismatch,valueMissing:a.valueMissing,valid:a.valid}}function Ne(e){return{isInvalid:!e.validity.valid,validationDetails:Te(e),validationErrors:e.validationMessage?[e.validationMessage]:[]}}function Ae(e){for(let a=0;a<e.elements.length;a++){let t=e.elements[a];if(!t.validity.valid)return t}return null}function He(e,a,t){let i=A({...e,value:a.isSelected}),{isInvalid:r,validationErrors:l,validationDetails:s}=i.displayValidation,{labelProps:o,inputProps:d,isSelected:n,isPressed:c,isDisabled:u,isReadOnly:x}=Oe({...e,isInvalid:r},a,t);qe(e,i,t);let{isIndeterminate:$,isRequired:y,validationBehavior:g="aria"}=e;m.useEffect(()=>{t.current&&(t.current.indeterminate=!!$)});let{pressProps:h}=Ee({isDisabled:u||x,onPress(){let{[j]:I}=e,{commitValidation:C}=I||i;C()}});return{labelProps:O(o,h),inputProps:{...d,checked:n,"aria-required":y&&g==="aria"||void 0,required:y&&g==="native"},isSelected:n,isPressed:c,isDisabled:u,isReadOnly:x,isInvalid:r,validationErrors:l,validationDetails:s}}const ve=new WeakMap;function Fe(e){let{description:a,errorMessage:t,isInvalid:i,validationState:r}=e,{labelProps:l,fieldProps:s}=we(e),o=F([!!a,!!t,i,r]),d=F([!!a,!!t,i,r]);return s=O(s,{"aria-describedby":[o,d,e["aria-describedby"]].filter(Boolean).join(" ")||void 0}),{labelProps:l,fieldProps:s,descriptionProps:{id:o},errorMessageProps:{id:d}}}function We(e,a){let{isDisabled:t,name:i,validationBehavior:r="aria"}=e,{isInvalid:l,validationErrors:s,validationDetails:o}=a.displayValidation,{labelProps:d,fieldProps:n,descriptionProps:c,errorMessageProps:u}=Fe({...e,labelElementType:"span",isInvalid:l,errorMessage:e.errorMessage||s});ve.set(a,{name:i,descriptionId:c.id,errorMessageId:u.id,validationBehavior:r});let x=ke(e,{labelable:!0}),{focusWithinProps:$}=Se({onBlurWithin:e.onBlur,onFocusWithin:e.onFocus,onFocusWithinChange:e.onFocusChange});return{groupProps:O(x,{role:"group","aria-disabled":t||void 0,...n,...$}),labelProps:d,descriptionProps:c,errorMessageProps:u,isInvalid:l,validationErrors:s,validationDetails:o}}function Ge(e,a,t){const i=_e({isReadOnly:e.isReadOnly||a.isReadOnly,isSelected:a.isSelected(e.value),onChange(h){h?a.addValue(e.value):a.removeValue(e.value),e.onChange&&e.onChange(h)}});let{name:r,descriptionId:l,errorMessageId:s,validationBehavior:o}=ve.get(a);var d;o=(d=e.validationBehavior)!==null&&d!==void 0?d:o;let{realtimeValidation:n}=A({...e,value:i.isSelected,name:void 0,validationBehavior:"aria"}),c=m.useRef(w),u=()=>{a.setInvalid(e.value,n.isInvalid?n:c.current)};m.useEffect(u);let x=a.realtimeValidation.isInvalid?a.realtimeValidation:n,$=o==="native"?a.displayValidation:x;var y;let g=He({...e,isReadOnly:e.isReadOnly||a.isReadOnly,isDisabled:e.isDisabled||a.isDisabled,name:e.name||r,isRequired:(y=e.isRequired)!==null&&y!==void 0?y:a.isRequired,validationBehavior:o,[j]:{realtimeValidation:x,displayValidation:$,resetValidation:a.resetValidation,commitValidation:a.commitValidation,updateValidation(h){c.current=h,u()}}},i,t);return{...g,inputProps:{...g.inputProps,"aria-describedby":[e["aria-describedby"],a.isInvalid?s:null,l].filter(Boolean).join(" ")||void 0}}}function Ue(e={}){let[a,t]=Le(e.value,e.defaultValue||[],e.onChange),i=!!e.isRequired&&a.length===0,r=m.useRef(new Map),l=A({...e,value:a}),s=l.displayValidation.isInvalid;var o;return{...l,value:a,setValue(n){e.isReadOnly||e.isDisabled||t(n)},isDisabled:e.isDisabled||!1,isReadOnly:e.isReadOnly||!1,isSelected(n){return a.includes(n)},addValue(n){e.isReadOnly||e.isDisabled||a.includes(n)||t(a.concat(n))},removeValue(n){e.isReadOnly||e.isDisabled||a.includes(n)&&t(a.filter(c=>c!==n))},toggleValue(n){e.isReadOnly||e.isDisabled||(a.includes(n)?t(a.filter(c=>c!==n)):t(a.concat(n)))},setInvalid(n,c){let u=new Map(r.current);c.isInvalid?u.set(n,c):u.delete(n),r.current=u,l.updateValidation(Me(...u.values()))},validationState:(o=e.validationState)!==null&&o!==void 0?o:s?"invalid":null,isInvalid:s,isRequired:i}}var ze="_1kcxloq0 onxwju19",Ke="_1kcxloq1 onxwju2o onxwju2x onxwju32 onxwjuc",Qe="_1kcxloq2 onxwju2l onxwju2u onxwjuq6",Ye=me({defaultClassName:"_1kcxloq5 _1kcxloq4 onxwju1r onxwju21 onxwju2a onxwju1g onxwju1by onxwju12c onxwju12b onxwju1c1 onxwju3e onxwjuaq onxwjuey onxwju218 onxwju20x onxwjuhe onxwju1 onxwju226 onxwju22e onxwju232 onxwju23i onxwju23v onxwjuna _1kcxloq3",variantClassNames:{},defaultVariants:{},compoundVariants:[]}),Je=me({defaultClassName:"_1kcxloq9 _1kcxloq8 onxwjumu onxwjulm onxwjuje onxwju1by onxwju13s onxwju3e onxwju3o onxwjuaq onxwju3u onxwjuey onxwjuzq onxwjuzk onxwjuhe onxwjui2 onxwjuju onxwju226 onxwju22e onxwju232 onxwju23i onxwju23v _1kcxloq7 _1kcxloq6",variantClassNames:{},defaultVariants:{},compoundVariants:[]});const fe=e=>{const a=m.useRef(null),t=m.useContext(he),{inputProps:i,isSelected:r}=Ge(e,t,a),{isFocusVisible:l,focusProps:s}=je();return p.createElement("label",{className:Ye(),...M({"focus-visible":l})},p.createElement(Pe,null,p.createElement("input",{...O(i,s),ref:a})),p.createElement("div",{className:q({display:"flex",gap:"2",width:"100%"})},p.createElement("div",{className:Je(),...M({checked:r})},p.createElement(Ve,null)),p.createElement("div",{className:q({alignSelf:"center",font:"sm",width:"100%"})},e.children)))};fe.displayName="OptionList.Item";const be=({children:e,content:a})=>!e&&!a?null:p.createElement("div",{className:q({display:"flex",gap:"2",justifyContent:"space-between"})},e??(a==null?void 0:a.map((t,i)=>p.createElement("span",{key:i},t))));be.displayName="OptionList.ItemSplitLabel";try{OptionList.Item.displayName="OptionList.Item",OptionList.Item.__docgenInfo={description:`The OptionListItem is used to populate OptionList. They are outlined with a large interactive area and flexible
label content layout.`,displayName:"OptionList.Item",props:{}}}catch{}const he=m.createContext(null),f=e=>{const{children:a,className:t,description:i,label:r,ref:l,style:s}=e,o={ref:l,className:t,style:s},d=Ue(e),{groupProps:n,labelProps:c,descriptionProps:u}=We(e,d);return p.createElement("div",{...n,...o,...M({"test-id":e.testId})},p.createElement("div",{...c,className:Ke},r),i&&p.createElement("div",{...u,className:Qe},i),p.createElement(he.Provider,{value:d},p.createElement("div",{className:ze},a)))};f.Item=fe;f.ItemSplitLabel=be;try{f.displayName="OptionList",f.__docgenInfo={description:"The OptionList is a form control that groups selectable items that apear as an outlined list of options and\nimplements React Aria `useCheckboxGroup`\n([docs](https://react-spectrum.adobe.com/react-aria/useCheckboxGroup.html))\n\nPopulate the OptionList group with the OptionListList, each item must have a `value` (unique) and be labelled.\nThe `value` of all active items are passed as a string array to set `defaultValue` (uncontrolled), `value`\n(controlled) and is the format returned from the onChange handler as well.\n\nUsed in the booking flow on the payment step for addons.\nFuture enhancements might include: validation states/error handling",displayName:"OptionList",props:{label:{defaultValue:null,description:"Label for the CheckboxButtons group needs to be provided at the component level for accessibility",name:"label",required:!0,type:{name:"ReactNode"}},description:{defaultValue:null,description:"A description for the field. Provides a hint such as specific requirements for what to choose.",name:"description",required:!1,type:{name:"ReactNode"}},children:{defaultValue:null,description:"Populate with one or more CheckboxItem components",name:"children",required:!1,type:{name:"ReactNode"}},name:{defaultValue:null,description:"The name of the input element, used when submitting an HTML form. See [MDN](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#htmlattrdefname).",name:"name",required:!1,type:{name:"string"}},defaultValue:{defaultValue:null,description:"The default value (uncontrolled).",name:"defaultValue",required:!1,type:{name:"string[]"}},value:{defaultValue:null,description:"Current selected value (controlled state)",name:"value",required:!1,type:{name:"string[]"}},onChange:{defaultValue:null,description:`Event handler when any checkbox button changes. Returned string array is the values of the inputs that are currently
checked.`,name:"onChange",required:!1,type:{name:"((value: string[]) => void)"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null"}},testId:{defaultValue:null,description:"The test ID will be rendered as a data attribute on the element for e2e testing purposes",name:"testId",required:!1,type:{name:"string"}}}}}catch{}try{f.Item.displayName="OptionList.Item",f.Item.__docgenInfo={description:`The OptionListItem is used to populate OptionList. They are outlined with a large interactive area and flexible
label content layout.`,displayName:"OptionList.Item",props:{}}}catch{}try{f.ItemSplitLabel.displayName="OptionList.ItemSplitLabel",f.ItemSplitLabel.__docgenInfo={description:"Helper component part to display a checkbox button label with a second column justified to the end",displayName:"OptionList.ItemSplitLabel",props:{content:{defaultValue:null,description:"convenience prop for passing through a string array instead of children",name:"content",required:!1,type:{name:"string[]"}}}}}catch{}const _=[["Tyre puncture repair","+28.00"],["Roadworthy certificate","+89.85"],["Re-gas air-conditioning","+99.00"],["Windscreen wipers - pair","+45.92"]],Xe={title:"Components/Option List",component:f,args:{label:"Commonly requested extras",name:"extras",children:_.map((e,a)=>p.createElement(f.Item,{key:a,value:`${a}`},e[0])),testId:"demo-option-list",onChange:ue()},tags:["beta"]},E={play:async({args:e,canvasElement:a,step:t})=>{const r=ge(a).getAllByRole("group")[0],l=$e(r,"checkbox");await t("Group renders label and attributes",async()=>{await b(r.firstChild).toHaveTextContent(`${e.label}`),await b(r).toHaveAttribute("data-test-id",e.testId)}),await t("Checkboxes render labels and attributes",async()=>{for(const[s,o]of l.entries()){const d=o.closest("label");await b(d).toHaveTextContent(_[s][0]),await b(o).not.toBeChecked(),await b(o).toHaveAttribute("name",e.name),await b(o).toHaveAttribute("value",`${s}`)}}),await t("Checked states and onChange event",async()=>{for(const s of[0,2]){const o=l[s];await H.click(o,{delay:25}),await b(e.onChange).toHaveBeenCalled(),await b(o).toBeChecked()}}),await t("Keyboard interaction",async()=>{await H.keyboard("{Shift>}[Tab][Tab]{/Shift}[Space][Tab][Tab][Space]",{delay:25}),await b(e.onChange).toHaveBeenCalled(),await b(l[0]).not.toBeChecked(),await b(l[2]).not.toBeChecked()})}},V={args:{children:_.map((e,a)=>p.createElement(f.Item,{key:a,value:`${a}`},p.createElement(f.ItemSplitLabel,{content:e})))}},k={args:{...V.args,defaultValue:["1"]}},S={render:()=>{var i;const[e,a]=m.useState(["0","1","2","3"]),t=r=>{a(r),ue()};return p.createElement(f,{label:(i=Xe.args)==null?void 0:i.label,onChange:t,value:e},_.map((r,l)=>p.createElement(f.Item,{key:l,value:`${l}`},p.createElement(f.ItemSplitLabel,{content:r}))))}};var G,U,z,K,Q;E.parameters={...E.parameters,docs:{...(G=E.parameters)==null?void 0:G.docs,source:{originalSource:`{
  play: async ({
    args,
    canvasElement,
    step
  }) => {
    const canvas = within(canvasElement);
    const group = canvas.getAllByRole('group')[0];
    const checkboxes = getAllByRole(group, 'checkbox');
    await step('Group renders label and attributes', async () => {
      await expect(group.firstChild).toHaveTextContent(\`\${args.label}\`);
      await expect(group).toHaveAttribute('data-test-id', args.testId);
    });
    await step('Checkboxes render labels and attributes', async () => {
      for (const [idx, checkbox] of checkboxes.entries()) {
        const label = checkbox.closest('label');
        await expect(label).toHaveTextContent(itemData[idx][0]);
        await expect(checkbox).not.toBeChecked();
        await expect(checkbox).toHaveAttribute('name', args.name);
        await expect(checkbox).toHaveAttribute('value', \`\${idx}\`);
      }
    });
    await step('Checked states and onChange event', async () => {
      for (const idx of [0, 2]) {
        const checkbox = checkboxes[idx];
        await userEvent.click(checkbox, {
          delay: 25
        });
        await expect(args.onChange).toHaveBeenCalled();
        await expect(checkbox).toBeChecked();
      }
    });
    await step('Keyboard interaction', async () => {
      await userEvent.keyboard('{Shift>}[Tab][Tab]{/Shift}[Space][Tab][Tab][Space]', {
        delay: 25
      });
      await expect(args.onChange).toHaveBeenCalled();
      await expect(checkboxes[0]).not.toBeChecked();
      await expect(checkboxes[2]).not.toBeChecked();
    });
  }
}`,...(z=(U=E.parameters)==null?void 0:U.docs)==null?void 0:z.source},description:{story:"For simple content, map through the options, e.g.\n\n```\nitemData.map((item, idx) => (\n  <CheckboxButtons.Item key={idx} value={`${idx}`}>\n    {item[0]}\n  </CheckboxButtons.Item>\n))\n```",...(Q=(K=E.parameters)==null?void 0:K.docs)==null?void 0:Q.description}}};var Y,J,X,Z,ee;V.parameters={...V.parameters,docs:{...(Y=V.parameters)==null?void 0:Y.docs,source:{originalSource:`{
  args: {
    children: itemData.map((data, idx) => <OptionList.Item key={idx} value={\`\${idx}\`}>
                <OptionList.ItemSplitLabel content={data} />
            </OptionList.Item>)
  }
}`,...(X=(J=V.parameters)==null?void 0:J.docs)==null?void 0:X.source},description:{story:"To acheive the the split-column layout in the checkbox label, use a CheckboxButtons.SplitLabel layout helper\ninside the CheckboxButtons.Item component. Currently supports text only. Populate the `content` prop on the SplitLabel\nwith a string array (content left, content right).",...(ee=(Z=V.parameters)==null?void 0:Z.docs)==null?void 0:ee.description}}};var ae,te,ie,ne,le;k.parameters={...k.parameters,docs:{...(ae=k.parameters)==null?void 0:ae.docs,source:{originalSource:`{
  args: {
    ...SplitLabel.args,
    defaultValue: ['1']
  }
}`,...(ie=(te=k.parameters)==null?void 0:te.docs)==null?void 0:ie.source},description:{story:"The second option is checked by default, but the inputs are uncontrolled.",...(le=(ne=k.parameters)==null?void 0:ne.docs)==null?void 0:le.description}}};var oe,re,se,de,ce;S.parameters={...S.parameters,docs:{...(oe=S.parameters)==null?void 0:oe.docs,source:{originalSource:`{
  render: () => {
    const [currentValue, setCurrentValue] = useState<string[]>(['0', '1', '2', '3']);
    const handleOnChange = (values: string[]) => {
      setCurrentValue(values);
      fn();
    };
    return <OptionList label={meta.args?.label} onChange={handleOnChange} value={currentValue}>
                {itemData.map((data, idx) => <OptionList.Item key={idx} value={\`\${idx}\`}>
                        <OptionList.ItemSplitLabel content={data} />
                    </OptionList.Item>)}
            </OptionList>;
  }
}`,...(se=(re=S.parameters)==null?void 0:re.docs)==null?void 0:se.source},description:{story:`Controlled state with onChange handler. Each checkbox item must have a unique value because the state is handled as
an array of the selected values.`,...(ce=(de=S.parameters)==null?void 0:de.docs)==null?void 0:ce.description}}};const ca=["Simple","SplitLabel","DefaultChecked","Controlled"];export{S as Controlled,k as DefaultChecked,E as Simple,V as SplitLabel,ca as __namedExportsOrder,Xe as default};
