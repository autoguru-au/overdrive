import{i as Z}from"./isChromatic-AKtkhq4f.js";import{r as e}from"./index-sWIihdb-.js";import{i as de}from"./tiny-invariant-CopsF_GD.js";import{u as R}from"./useResponsiveValue-B4BMRA8X.js";import{S}from"./Stack-B1lLv_n-.js";import{T as m}from"./Text-j-4IjDue.js";import"./_commonjsHelpers-C932wzq6.js";import"./index-TqjM1jfD.js";import"./Box-00gOjviF.js";import"./useMedia-CJa1WIfW.js";import"./ThemeProvider-BNsiTy9v.js";import"./makeTheme-BvwTE3C0.js";import"./index-CaeieD2U.js";import"./useTextStyles-DdPcDMrx.js";const E={1:16,2:32,3:48,4:64,5:96,6:128,7:256,8:384,9:640,10:750,11:828,12:1080,13:1200,14:1920,15:2048,16:3840},q={widthMap:E,getWidthValue:t=>E[t],srcUrlMapper:null,generateSrcSet:null},ee=e.createContext(null),te=()=>e.useContext(ee),w=({children:t,srcUrlMapper:a=q.srcUrlMapper,getWidthValue:r=q.getWidthValue,widthMap:i=q.widthMap})=>{const l=e.useCallback(({quality:s,src:u})=>Object.keys(i).map(d=>{const n=r(d);return`${a({quality:s,src:u,width:n})} ${n}w`}).join(", "),[i,a,r]);return e.createElement(ee.Provider,{value:e.useMemo(()=>({widthMap:i,srcUrlMapper:a,getWidthValue:r,generateSrcSet:l}),[a,i,r,l])},t)};try{w.displayName="ImageServerProvider",w.__docgenInfo={description:"",displayName:"ImageServerProvider",props:{widthMap:{defaultValue:{value:"defaultValue.widthMap"},description:"",name:"widthMap",required:!1,type:{name:"Record<WidthScale, number>"}},srcUrlMapper:{defaultValue:{value:"defaultValue.srcUrlMapper"},description:"",name:"srcUrlMapper",required:!1,type:{name:"(params: UrlParams) => string"}},getWidthValue:{defaultValue:{value:"defaultValue.getWidthValue"},description:"",name:"getWidthValue",required:!1,type:{name:"((width: WidthScale) => number)"}}}}}catch{}const I=({eager:t="false",syncDecoding:a="false",className:r="",src:i,srcSet:l,fallbackComponent:s,...u})=>{const[d,n]=e.useState(!1),V=()=>{n(!0)};return d&&s?s:e.createElement("img",{loading:t?"eager":"lazy",decoding:a?"sync":"async",className:r,srcSet:l,src:i,onError:V,...u})};try{I.displayName="SimpleImage",I.__docgenInfo={description:"",displayName:"SimpleImage",props:{src:{defaultValue:null,description:"The address or URL of the a media resource that is to be considered.",name:"src",required:!0,type:{name:"string"}},eager:{defaultValue:{value:"false"},description:"If set to true, image lazy loading is disabled.",name:"eager",required:!1,type:{name:"boolean"}},srcSet:{defaultValue:null,description:"Can be manually defined as a normal `srcset` img tag attribute but will be automatically set for\nall available sizes when an `ImageServerProvider` is defined upstream.",name:"srcSet",required:!1,type:{name:"string"}},syncDecoding:{defaultValue:{value:"false"},description:`When set to true image async decoding by the browser is disabled.
Async decoding of the image reduces delay in presenting other content.`,name:"syncDecoding",required:!1,type:{name:"boolean"}},width:{defaultValue:null,description:"Only effective if `ImageServerProvider` is defined upstream.\nWill be set as `width` attribute on the `img` tag",name:"width",required:!1,type:{name:"string"}},height:{defaultValue:null,description:"Will be set as `height` attribute on the `img` tag",name:"height",required:!1,type:{name:"string"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}},fallbackComponent:{defaultValue:null,description:"",name:"fallbackComponent",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}}}}}catch{}const P=({imageWidth:t,sizes:a="100vw",quality:r=70,src:i,...l})=>{de(r>0&&r<=100);const s=R(t),u=R(a),{srcUrlMapper:d,getWidthValue:n,generateSrcSet:V}=te(),oe=e.useMemo(()=>d({src:i,width:n(s),quality:r}),[i,s,r,d,n]),le=e.useMemo(()=>s?void 0:V({src:i,quality:r}),[i,r]);return e.createElement(I,{sizes:u||void 0,srcSet:le,src:oe,...l})};try{P.displayName="ResponsiveImage",P.__docgenInfo={description:"",displayName:"ResponsiveImage",props:{imageWidth:{defaultValue:null,description:"Only effective if `ImageServerProvider` is defined upstream.\nNot to be confused with the `width` of the image tag. `imageWidth` is purely to do with the\nintrinsic size of the image asset coming back from the Image Server and does not change the layout size of the `img` tag\nIf `imageWidth` is provided, it will be exactly used and no automatic `srcSet` will be defined and `sizes` will have no effect.\n`imageWidth` can be a single value e.g. `4` to be used for all screen sizes or an array to be used for responsive values e.g. `[4, ,6, 8]`",name:"imageWidth",required:!0,type:{name:"never[]"}},sizes:{defaultValue:null,description:"Only effective if `ImageServerProvider` is defined upstream.\nA vw value e.g. `80vw` or an array of vw values `['100vw', ,'50vw', '30vw']` to be used as responsive.\nWhen defined, browser will pick the closest match from srcSet based on viewport width size.\nJust like `imageWidth` sizes has no effect on the `img` tag layout size and is purely to do with the\nintrinsic size of the image asset coming back from the Image Server.\nin `['100vw', ,'50vw', '30vw']` browser will fetch the best image asset to cover\nthe whole width of mobile and tablet devices, 50% of desktop screen width 30% of a large desktop screen width irrespective\nof the size of img tag on the page. So a `100vh` set for a large desktop might fetch a `3840px` wide\nasset even if the image only occupies 10px of the page width.",name:"sizes",required:!0,type:{name:"ResponsiveProp<string>"}},quality:{defaultValue:{value:"70"},description:"Only effective if `ImageServerProvider` is defined upstream.\nA number between 1 and 100 to be used by the image server for the quality of image returned.",name:"quality",required:!1,type:{name:"number"}},width:{defaultValue:null,description:"Only effective if `ImageServerProvider` is defined upstream.\nWill be set as `width` attribute on the `img` tag",name:"width",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},height:{defaultValue:null,description:"Will be set as `height` attribute on the `img` tag",name:"height",required:!1,type:{name:"string"}},src:{defaultValue:null,description:"The address or URL of the a media resource that is to be considered.",name:"src",required:!0,type:{name:"string"}},srcSet:{defaultValue:null,description:"Can be manually defined as a normal `srcset` img tag attribute but will be automatically set for\nall available sizes when an `ImageServerProvider` is defined upstream.",name:"srcSet",required:!1,type:{name:"string"}},eager:{defaultValue:null,description:"If set to true, image lazy loading is disabled.",name:"eager",required:!1,type:{name:"boolean"}},syncDecoding:{defaultValue:null,description:`When set to true image async decoding by the browser is disabled.
Async decoding of the image reduces delay in presenting other content.`,name:"syncDecoding",required:!1,type:{name:"boolean"}},fallbackComponent:{defaultValue:null,description:"",name:"fallbackComponent",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}}}}}catch{}const o=({unoptimised:t=!1,imageWidth:a,...r})=>te()&&!t?e.createElement(P,{imageWidth:a,...r}):e.createElement(I,{...r});try{o.displayName="Image",o.__docgenInfo={description:"",displayName:"Image",props:{unoptimised:{defaultValue:{value:"false"},description:"If set to true, no size/quality optimisation will be done even when `ImageServerProvider` has been defined upstream.",name:"unoptimised",required:!1,type:{name:"boolean"}},imageWidth:{defaultValue:null,description:"Only effective if `ImageServerProvider` is defined upstream.\nNot to be confused with the `width` of the image tag. `imageWidth` is purely to do with the\nintrinsic size of the image asset coming back from the Image Server and does not change the layout size of the `img` tag\nIf `imageWidth` is provided, it will be exactly used and no automatic `srcSet` will be defined and `sizes` will have no effect.\n`imageWidth` can be a single value e.g. `4` to be used for all screen sizes or an array to be used for responsive values e.g. `[4, ,6, 8]`",name:"imageWidth",required:!0,type:{name:"never[]"}},sizes:{defaultValue:null,description:"Only effective if `ImageServerProvider` is defined upstream.\nA vw value e.g. `80vw` or an array of vw values `['100vw', ,'50vw', '30vw']` to be used as responsive.\nWhen defined, browser will pick the closest match from srcSet based on viewport width size.\nJust like `imageWidth` sizes has no effect on the `img` tag layout size and is purely to do with the\nintrinsic size of the image asset coming back from the Image Server.\nin `['100vw', ,'50vw', '30vw']` browser will fetch the best image asset to cover\nthe whole width of mobile and tablet devices, 50% of desktop screen width 30% of a large desktop screen width irrespective\nof the size of img tag on the page. So a `100vh` set for a large desktop might fetch a `3840px` wide\nasset even if the image only occupies 10px of the page width.",name:"sizes",required:!0,type:{name:"ResponsiveProp<string>"}},quality:{defaultValue:null,description:"Only effective if `ImageServerProvider` is defined upstream.\nA number between 1 and 100 to be used by the image server for the quality of image returned.",name:"quality",required:!1,type:{name:"number"}},width:{defaultValue:null,description:"Only effective if `ImageServerProvider` is defined upstream.\nWill be set as `width` attribute on the `img` tag",name:"width",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},height:{defaultValue:null,description:"Will be set as `height` attribute on the `img` tag",name:"height",required:!1,type:{name:"string"}},src:{defaultValue:null,description:"The address or URL of the a media resource that is to be considered.",name:"src",required:!0,type:{name:"string"}},srcSet:{defaultValue:null,description:"Can be manually defined as a normal `srcset` img tag attribute but will be automatically set for\nall available sizes when an `ImageServerProvider` is defined upstream.",name:"srcSet",required:!1,type:{name:"string"}},eager:{defaultValue:null,description:"If set to true, image lazy loading is disabled.",name:"eager",required:!1,type:{name:"boolean"}},syncDecoding:{defaultValue:null,description:`When set to true image async decoding by the browser is disabled.
Async decoding of the image reduces delay in presenting other content.`,name:"syncDecoding",required:!1,type:{name:"boolean"}},fallbackComponent:{defaultValue:null,description:"",name:"fallbackComponent",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}}}}}catch{}const _=Z()?["8"]:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16"],me=Z()?["70"]:[1,20,40,60,80,100],Pe={title:"Foundation/Image",component:o,args:{imageWidth:8,width:8,quality:void 0,eager:!1,unoptimised:!1},argTypes:{imageWidth:{options:[..._,"full"],control:{type:"select"}},width:{options:[..._,"full"],control:{type:"select"}},quality:{control:{type:"number",min:1,max:100}},eager:{control:{type:"boolean"}},unoptimised:{control:{type:"boolean"}}}},b=t=>t==="full"?"100%":E[t],ue=t=>e.createElement("div",{style:{width:"100%",overflow:"auto"}},e.createElement(o,{...t,width:b(t.width)})),ae={src:"https://cdn.autoguru.com.au/images/autoguru-og.jpg"},c=ue.bind(ae);c.args=ae;const k=({src:t,width:a,quality:r})=>`https://images.autoguru.com.au/?url=${t}&w=${a}&q=${r}`,z=t=>e.createElement(w,{srcUrlMapper:k},e.createElement("div",{style:{width:"100%",overflow:"auto"}},e.createElement(o,{...t,width:b(t.width)}))),re={src:"https://cdn.autoguru.com.au/images/autoguru-test-highres-image.jpg",unoptimised:!0},p=z.bind(re);p.args=re;const W={src:"https://cdn.autoguru.com.au/images/autoguru-test-highres-image.jpg",quality:60,imageWidth:8,sizes:["100vh",,"60vh","40vh"]},g=z.bind(W);g.args=W;const ie={src:"https://cdn.autoguru.com.au/images/autoguru-test-highres-image.jpg",width:"full",sizes:["100vw","70vw","50vw","40vw"],imageWidth:[5,8,,12]},h=z.bind(ie);h.args=ie;const se={src:"https://cdn.autoguru.com.au/images/autoguru-test-highres-image.jpg",width:"full",sizes:["100vw","70vw","50vw","40vw"]},f=z.bind(se);f.args=se;const ce=t=>e.createElement(w,{srcUrlMapper:k},e.createElement("div",{style:{width:"100%",overflow:"auto"}},e.createElement(S,{space:"5"},me.map(a=>e.createElement(S,{key:a,space:"1"},e.createElement(m,null,"Quality: ",e.createElement(m,{strong:!0},a)),e.createElement(o,{key:a,...t,width:b(t.width),imageWidth:t.width,quality:a})))))),v=ce.bind(W);v.args=W;const pe=t=>e.createElement(w,{srcUrlMapper:k},e.createElement("div",{style:{width:"100%",overflow:"auto"}},e.createElement(S,{width:"full",space:"5"},_.map(a=>e.createElement(S,{key:a,space:"1"},e.createElement(m,null,"Quality: ",e.createElement(m,{strong:!0},t.quality)),e.createElement(m,null,"Width:"," ",e.createElement(m,{strong:!0},a,": ",b(a),"px")),e.createElement(o,{...t,width:b(a),imageWidth:a})))))),ne={src:"https://cdn.autoguru.com.au/images/autoguru-test-highres-image.jpg",quality:20,sizes:["100vh",,"60vh","40vh"]},y=pe.bind(ne);y.args=ne;var T,C,N;c.parameters={...c.parameters,docs:{...(T=c.parameters)==null?void 0:T.docs,source:{originalSource:"SimpleTemplate.bind(standardProps)",...(N=(C=c.parameters)==null?void 0:C.docs)==null?void 0:N.source}}};var x,O,U;p.parameters={...p.parameters,docs:{...(x=p.parameters)==null?void 0:x.docs,source:{originalSource:"WidthProviderTemplate.bind(withImageServerUnoptimisedProps)",...(U=(O=p.parameters)==null?void 0:O.docs)==null?void 0:U.source}}};var A,M,j;g.parameters={...g.parameters,docs:{...(A=g.parameters)==null?void 0:A.docs,source:{originalSource:"WidthProviderTemplate.bind(withImageServerProps)",...(j=(M=g.parameters)==null?void 0:M.docs)==null?void 0:j.source}}};var D,Q,J;h.parameters={...h.parameters,docs:{...(D=h.parameters)==null?void 0:D.docs,source:{originalSource:"WidthProviderTemplate.bind(withResponsiveImageWidthProps)",...(J=(Q=h.parameters)==null?void 0:Q.docs)==null?void 0:J.source}}};var $,L,X;f.parameters={...f.parameters,docs:{...($=f.parameters)==null?void 0:$.docs,source:{originalSource:"WidthProviderTemplate.bind(withResponsiveSizesProps)",...(X=(L=f.parameters)==null?void 0:L.docs)==null?void 0:X.source}}};var F,H,B;v.parameters={...v.parameters,docs:{...(F=v.parameters)==null?void 0:F.docs,source:{originalSource:"AllQualityTemplate.bind(withImageServerProps)",...(B=(H=v.parameters)==null?void 0:H.docs)==null?void 0:B.source}}};var G,K,Y;y.parameters={...y.parameters,docs:{...(G=y.parameters)==null?void 0:G.docs,source:{originalSource:"AllSizeTemplate.bind(withImageServerResizingProps)",...(Y=(K=y.parameters)==null?void 0:K.docs)==null?void 0:Y.source}}};const _e=["standard","withImageServerUnoptimised","withImageServer","withResponsiveImageWidth","withResponsiveSizes","withImageServerQualities","withImageServerResizing"];export{_e as __namedExportsOrder,Pe as default,c as standard,g as withImageServer,v as withImageServerQualities,y as withImageServerResizing,p as withImageServerUnoptimised,h as withResponsiveImageWidth,f as withResponsiveSizes};
